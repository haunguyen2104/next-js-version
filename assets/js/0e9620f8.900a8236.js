"use strict";(self.webpackChunknext_version=self.webpackChunknext_version||[]).push([[5063],{5575:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var a=n(5893),o=n(1151);const s={description:"Learn how to share components and state between Next.js pages with Layouts."},r="Layouts",i={id:"next-js/v13.0.0/basic-features/layouts",title:"Layouts",description:"Learn how to share components and state between Next.js pages with Layouts.",source:"@site/docs/next-js/v13.0.0/basic-features/layouts.md",sourceDirName:"next-js/v13.0.0/basic-features",slug:"/next-js/v13.0.0/basic-features/layouts",permalink:"/next-js/v13.0.0/basic-features/layouts",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/next-js/v13.0.0/basic-features/layouts.md",tags:[],version:"current",frontMatter:{description:"Learn how to share components and state between Next.js pages with Layouts."},sidebar:"tutorialSidebar",previous:{title:"Image Component and Image Optimization",permalink:"/next-js/v13.0.0/basic-features/image-optimization"},next:{title:"Pages",permalink:"/next-js/v13.0.0/basic-features/pages"}},c={},p=[{value:"Examples",id:"examples",level:2},{value:"Single Shared Layout with Custom App",id:"single-shared-layout-with-custom-app",level:3},{value:"Per-Page Layouts",id:"per-page-layouts",level:3},{value:"With TypeScript",id:"with-typescript",level:3},{value:"Data Fetching",id:"data-fetching",level:3}];function l(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"layouts",children:"Layouts"}),"\n",(0,a.jsxs)(n,{open:!0,children:[(0,a.jsx)("summary",{children:(0,a.jsx)("b",{children:"Examples"})}),(0,a.jsx)("ul",{children:(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://github.com/vercel/next.js/tree/canary/examples/layout-component",children:"layout-component"})})})]}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Note:"})," We are introducing improved layouts support in Next.js. Read the ",(0,a.jsx)(t.a,{href:"https://nextjs.org/blog/layouts-rfc",children:"Layouts RFC"})," for more details and to provide feedback."]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["The React model allows us to deconstruct a ",(0,a.jsx)(t.a,{href:"/docs/basic-features/pages.md",children:"page"})," into a series of components. Many of these components are often reused between pages. For example, you might have the same navigation bar and footer on every page."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",children:"// components/layout.js\n\nimport Navbar from './navbar'\nimport Footer from './footer'\n\nexport default function Layout({ children }) {\n  return (\n    <>\n      <Navbar />\n      <main>{children}</main>\n      <Footer />\n    </>\n  )\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(t.h3,{id:"single-shared-layout-with-custom-app",children:"Single Shared Layout with Custom App"}),"\n",(0,a.jsxs)(t.p,{children:["If you only have one layout for your entire application, you can create a ",(0,a.jsx)(t.a,{href:"/docs/advanced-features/custom-app.md",children:"Custom App"})," and wrap your application with the layout. Since the ",(0,a.jsx)(t.code,{children:"<Layout />"})," component is re-used when changing pages, its component state will be preserved (e.g. input values)."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",children:"// pages/_app.js\n\nimport Layout from '../components/layout'\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <Layout>\n      <Component {...pageProps} />\n    </Layout>\n  )\n}\n"})}),"\n",(0,a.jsx)(t.h3,{id:"per-page-layouts",children:"Per-Page Layouts"}),"\n",(0,a.jsxs)(t.p,{children:["If you need multiple layouts, you can add a property ",(0,a.jsx)(t.code,{children:"getLayout"})," to your page, allowing you to return a React component for the layout. This allows you to define the layout on a ",(0,a.jsx)(t.em,{children:"per-page basis"}),". Since we're returning a function, we can have complex nested layouts if desired."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",children:"// pages/index.js\n\nimport Layout from '../components/layout'\nimport NestedLayout from '../components/nested-layout'\n\nexport default function Page() {\n  return {\n    /** Your content */\n  }\n}\n\nPage.getLayout = function getLayout(page) {\n  return (\n    <Layout>\n      <NestedLayout>{page}</NestedLayout>\n    </Layout>\n  )\n}\n"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",children:"// pages/_app.js\n\nexport default function MyApp({ Component, pageProps }) {\n  // Use the layout defined at the page level, if available\n  const getLayout = Component.getLayout || ((page) => page)\n\n  return getLayout(<Component {...pageProps} />)\n}\n"})}),"\n",(0,a.jsxs)(t.p,{children:["When navigating between pages, we want to\xa0",(0,a.jsx)(t.em,{children:"persist"}),"\xa0page state (input values, scroll position, etc.) for a Single-Page Application (SPA) experience."]}),"\n",(0,a.jsx)(t.p,{children:"This layout pattern enables state persistence because the React component tree is maintained between page transitions. With the component tree, React can understand which elements have changed to preserve state."}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Note"}),": This process is called\xa0",(0,a.jsx)(t.a,{href:"https://reactjs.org/docs/reconciliation.html",children:"reconciliation"}),", which is how React understands which elements have changed."]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"with-typescript",children:"With TypeScript"}),"\n",(0,a.jsxs)(t.p,{children:["When using TypeScript, you must first create a new type for your pages which includes a ",(0,a.jsx)(t.code,{children:"getLayout"})," function. Then, you must create a new type for your ",(0,a.jsx)(t.code,{children:"AppProps"})," which overrides the ",(0,a.jsx)(t.code,{children:"Component"})," property to use the previously created type."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-tsx",children:"// pages/index.tsx\n\nimport type { ReactElement } from 'react'\nimport Layout from '../components/layout'\nimport NestedLayout from '../components/nested-layout'\nimport type { NextPageWithLayout } from './_app'\n\nconst Page: NextPageWithLayout = () => {\n  return <p>hello world</p>\n}\n\nPage.getLayout = function getLayout(page: ReactElement) {\n  return (\n    <Layout>\n      <NestedLayout>{page}</NestedLayout>\n    </Layout>\n  )\n}\n\nexport default Page\n"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-tsx",children:"// pages/_app.tsx\n\nimport type { ReactElement, ReactNode } from 'react'\nimport type { NextPage } from 'next'\nimport type { AppProps } from 'next/app'\n\nexport type NextPageWithLayout<P = {}, IP = P> = NextPage<P, IP> & {\n  getLayout?: (page: ReactElement) => ReactNode\n}\n\ntype AppPropsWithLayout = AppProps & {\n  Component: NextPageWithLayout\n}\n\nexport default function MyApp({ Component, pageProps }: AppPropsWithLayout) {\n  // Use the layout defined at the page level, if available\n  const getLayout = Component.getLayout ?? ((page) => page)\n\n  return getLayout(<Component {...pageProps} />)\n}\n"})}),"\n",(0,a.jsx)(t.h3,{id:"data-fetching",children:"Data Fetching"}),"\n",(0,a.jsxs)(t.p,{children:["Inside your layout, you can fetch data on the client-side using ",(0,a.jsx)(t.code,{children:"useEffect"})," or a library like ",(0,a.jsx)(t.a,{href:"https://swr.vercel.app/",children:"SWR"}),". Because this file is not a ",(0,a.jsx)(t.a,{href:"/docs/basic-features/pages.md",children:"Page"}),", you cannot use ",(0,a.jsx)(t.code,{children:"getStaticProps"})," or ",(0,a.jsx)(t.code,{children:"getServerSideProps"})," currently."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",children:"// components/layout.js\n\nimport useSWR from 'swr'\nimport Navbar from './navbar'\nimport Footer from './footer'\n\nexport default function Layout({ children }) {\n  const { data, error } = useSWR('/api/navigation', fetcher)\n\n  if (error) return <div>Failed to load</div>\n  if (!data) return <div>Loading...</div>\n\n  return (\n    <>\n      <Navbar links={data.links} />\n      <main>{children}</main>\n      <Footer />\n    </>\n  )\n}\n"})}),"\n",(0,a.jsx)(t.p,{children:"For more information on what to do next, we recommend the following sections:"}),"\n",(0,a.jsx)("div",{class:"card",children:(0,a.jsxs)("a",{href:"/docs/basic-features/pages.md",children:[(0,a.jsx)("b",{children:"Pages:"}),(0,a.jsx)("small",{children:"Learn more about what pages are in Next.js."})]})}),"\n",(0,a.jsx)("div",{class:"card",children:(0,a.jsxs)("a",{href:"/docs/advanced-features/custom-app.md",children:[(0,a.jsx)("b",{children:"Custom App:"}),(0,a.jsx)("small",{children:"Learn more about how Next.js initialize pages."})]})})]})}function u(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>i,a:()=>r});var a=n(7294);const o={},s=a.createContext(o);function r(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);