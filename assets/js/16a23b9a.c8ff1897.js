"use strict";(self.webpackChunknext_version=self.webpackChunknext_version||[]).push([[29],{8413:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var o=t(5893),s=t(1151);const i={description:"Optimizing loading web fonts with the built-in `@next/font` loaders."},l="Optimizing Fonts",a={id:"next-js/v13.0.1/basic-features/font-optimization",title:"Optimizing Fonts",description:"Optimizing loading web fonts with the built-in `@next/font` loaders.",source:"@site/docs/next-js/v13.0.1/basic-features/font-optimization.md",sourceDirName:"next-js/v13.0.1/basic-features",slug:"/next-js/v13.0.1/basic-features/font-optimization",permalink:"/next-js/v13.0.1/basic-features/font-optimization",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/next-js/v13.0.1/basic-features/font-optimization.md",tags:[],version:"current",frontMatter:{description:"Optimizing loading web fonts with the built-in `@next/font` loaders."},sidebar:"tutorialSidebar",previous:{title:"Fast Refresh",permalink:"/next-js/v13.0.1/basic-features/fast-refresh"},next:{title:"Image Component and Image Optimization",permalink:"/next-js/v13.0.1/basic-features/image-optimization"}},r={},c=[{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Google Fonts",id:"google-fonts",level:3},{value:"Specifying a subset",id:"specifying-a-subset",level:4},{value:"Local Fonts",id:"local-fonts",level:3},{value:"Preloading",id:"preloading",level:2},{value:"Reusing fonts",id:"reusing-fonts",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"optimizing-fonts",children:"Optimizing Fonts"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"/docs/api-reference/next/font.md",children:(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"@next/font"})})})," will automatically optimize your fonts (including custom fonts) and remove external network requests for improved privacy and performance."]}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"@next/font"})," includes ",(0,o.jsx)(n.strong,{children:"built-in automatic self-hosting"})," for ",(0,o.jsx)(n.em,{children:"any"})," font file. This means you can optimally load web fonts with zero layout shift, thanks to the underlying CSS ",(0,o.jsx)(n.code,{children:"size-adjust"})," property used."]}),"\n",(0,o.jsxs)(n.p,{children:["This new font system also allows you to conveniently use all Google Fonts with performance and privacy in mind. CSS and font files are downloaded at build time and self-hosted with the rest of your static assets. ",(0,o.jsx)(n.strong,{children:"No requests are sent to Google by the browser."})]}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsxs)(n.p,{children:["To get started, install ",(0,o.jsx)(n.code,{children:"@next/font"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm install @next/font\n"})}),"\n",(0,o.jsx)(n.h3,{id:"google-fonts",children:"Google Fonts"}),"\n",(0,o.jsxs)(n.p,{children:["Automatically self-host any Google Font. Fonts are included in the deployment and served from the same domain as your deployment. ",(0,o.jsx)(n.strong,{children:"No requests are sent to Google by the browser."})]}),"\n",(0,o.jsxs)(n.p,{children:["Import the font you would like to use from ",(0,o.jsx)(n.code,{children:"@next/font/google"})," as a function. We recommend using ",(0,o.jsx)(n.a,{href:"https://fonts.google.com/variablefonts",children:(0,o.jsx)(n.strong,{children:"variable fonts"})})," for the best performance and flexibility."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"// app/layout.tsx\nimport { Inter } from '@next/font/google'\n\n// If loading a variable font, you don't need to specify the font weight\nconst inter = Inter()\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode,\n}) {\n  return (\n    <html lang=\"en\" className={inter.className}>\n      <body>{children}</body>\n    </html>\n  )\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["If you can't use a variable font, you will ",(0,o.jsx)(n.strong,{children:"need to specify a weight"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"// app/layout.tsx\nimport { Roboto } from '@next/font/google'\n\nconst roboto = Roboto({\n  weight: '400',\n})\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode,\n}) {\n  return (\n    <html lang=\"en\" className={roboto.className}>\n      <body>{children}</body>\n    </html>\n  )\n}\n"})}),"\n",(0,o.jsx)(n.h4,{id:"specifying-a-subset",children:"Specifying a subset"}),"\n",(0,o.jsxs)(n.p,{children:["Google Fonts are automatically ",(0,o.jsx)(n.a,{href:"https://fonts.google.com/knowledge/glossary/subsetting",children:"subset"}),". This reduces the size of the font file and improves performance. You'll need to define which of these subsets you want to preload. Failing to specify any subsets while ",(0,o.jsx)(n.a,{href:"/docs/api-reference/next/font.md#preload",children:(0,o.jsx)(n.code,{children:"preload"})})," is true will result in a warning."]}),"\n",(0,o.jsx)(n.p,{children:"This can be done in 2 ways:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"On a font per font basis by adding it to the function call"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"// app/layout.tsx\nconst inter = Inter({ subsets: ['latin'] })\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Globally for all your fonts in your ",(0,o.jsx)(n.code,{children:"next.config.js"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"// next.config.js\nmodule.exports = {\n  experimental: {\n    fontLoaders: [\n      { loader: '@next/font/google', options: { subsets: ['latin'] } },\n    ],\n  },\n}\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"If both are configured, the subset in the function call is used."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["View the ",(0,o.jsx)(n.a,{href:"/docs/api-reference/next/font.md#nextfontgoogle",children:"Font API Reference"})," for more information."]}),"\n",(0,o.jsx)(n.h3,{id:"local-fonts",children:"Local Fonts"}),"\n",(0,o.jsxs)(n.p,{children:["Import ",(0,o.jsx)(n.code,{children:"@next/font/local"})," and specify the ",(0,o.jsx)(n.code,{children:"src"})," of your local font file. We recommend using ",(0,o.jsx)(n.a,{href:"https://fonts.google.com/variablefonts",children:(0,o.jsx)(n.strong,{children:"variable fonts"})})," for the best performance and flexibility."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"/// app/layout.tsx\nimport localFont from '@next/font/local'\n\n// Font files can be colocated inside of `app`\nconst myFont = localFont({ src: './my-font.woff2' })\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode,\n}) {\n  return (\n    <html lang=\"en\" className={myFont.className}>\n      <body>{children}</body>\n    </html>\n  )\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["View the ",(0,o.jsx)(n.a,{href:"/docs/api-reference/next/font.md#nextfontlocal",children:"Font API Reference"})," for more information."]}),"\n",(0,o.jsx)(n.h2,{id:"preloading",children:"Preloading"}),"\n",(0,o.jsx)(n.p,{children:"When a font function is called on a page of your site, it is not globally available and preloaded on all routes. Rather, the font is only preloaded on the related route/s based on the type of file where it is used:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["if it's a ",(0,o.jsx)(n.a,{href:"https://beta.nextjs.org/docs/routing/pages-and-layouts#pages",children:"unique page"}),", it is preloaded on the unique route for that page"]}),"\n",(0,o.jsxs)(n.li,{children:["if it's a ",(0,o.jsx)(n.a,{href:"https://beta.nextjs.org/docs/routing/pages-and-layouts#layouts",children:"layout"}),", it is preloaded on all the routes wrapped by the layout"]}),"\n",(0,o.jsxs)(n.li,{children:["if it's the ",(0,o.jsx)(n.a,{href:"https://beta.nextjs.org/docs/routing/pages-and-layouts#root-layout-required",children:"root layout"}),", it is preloaded on all routes"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"reusing-fonts",children:"Reusing fonts"}),"\n",(0,o.jsxs)(n.p,{children:["Every time you call the ",(0,o.jsx)(n.code,{children:"localFont"})," or Google font function, that font is hosted as one instance in your application. Therefore, if you load the same font function in multiple files, multiple instances of the same font are hosted. In this situation, it is recommended to do the following:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Call the font loader function in one shared file"}),"\n",(0,o.jsx)(n.li,{children:"Export it as a constant"}),"\n",(0,o.jsx)(n.li,{children:"Import the constant in each file where you would like to use this font"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsx)("div",{class:"card",children:(0,o.jsxs)("a",{href:"/docs/api-reference/next/font.md",children:[(0,o.jsx)("b",{children:"Font API Reference"}),(0,o.jsx)("small",{children:"See the API Reference for the Font module."})]})}),"\n",(0,o.jsx)("div",{class:"card",children:(0,o.jsxs)("a",{href:"/docs/basic-features/image-optimization.md",children:[(0,o.jsx)("b",{children:"Image Optimization"}),(0,o.jsx)("small",{children:"Learn how to optimize images with the Image component."})]})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>l});var o=t(7294);const s={},i=o.createContext(s);function l(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);