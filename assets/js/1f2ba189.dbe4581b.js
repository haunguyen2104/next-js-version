"use strict";(self.webpackChunknext_version=self.webpackChunknext_version||[]).push([[6436],{233:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var r=t(5893),s=t(1151);const o={description:"Learn how to migrate from React Router to file-system based routes with Next.js."},i="Migrating from React Router",a={id:"next-js/v13.0.0/migrating/from-react-router",title:"Migrating from React Router",description:"Learn how to migrate from React Router to file-system based routes with Next.js.",source:"@site/docs/next-js/v13.0.0/migrating/from-react-router.md",sourceDirName:"next-js/v13.0.0/migrating",slug:"/next-js/v13.0.0/migrating/from-react-router",permalink:"/next-js/v13.0.0/migrating/from-react-router",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/next-js/v13.0.0/migrating/from-react-router.md",tags:[],version:"current",frontMatter:{description:"Learn how to migrate from React Router to file-system based routes with Next.js."},sidebar:"tutorialSidebar",previous:{title:"Migrating from Gatsby",permalink:"/next-js/v13.0.0/migrating/from-gatsby"},next:{title:"Incrementally Adopting Next.js",permalink:"/next-js/v13.0.0/migrating/incremental-adoption"}},l={},c=[{value:"Basics",id:"basics",level:2},{value:"Nested Routes",id:"nested-routes",level:2},{value:"Server Rendering",id:"server-rendering",level:2},{value:"Code Splitting",id:"code-splitting",level:2},{value:"Scroll Restoration",id:"scroll-restoration",level:2},{value:"Learn More",id:"learn-more",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"migrating-from-react-router",children:"Migrating from React Router"}),"\n",(0,r.jsxs)(n.p,{children:["This guide will help you understand how to transition from ",(0,r.jsx)(n.a,{href:"https://reactrouter.com",children:"React Router"})," to ",(0,r.jsx)(n.a,{href:"/docs/routing/introduction.md",children:"file-system based"})," routes with Next.js. Using ",(0,r.jsx)(n.a,{href:"/docs/api-reference/next/link.md",children:(0,r.jsx)(n.code,{children:"next/link"})})," and ",(0,r.jsx)(n.a,{href:"/docs/api-reference/next/router.md",children:(0,r.jsx)(n.code,{children:"next/router"})})," will allow you to:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Decrease bundle size by removing React Router as a dependency."}),"\n",(0,r.jsx)(n.li,{children:"Define your application routes through the file system."}),"\n",(0,r.jsx)(n.li,{children:"Utilize the latest improvements to the Next.js framework."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"basics",children:"Basics"}),"\n",(0,r.jsx)(n.p,{children:"First, uninstall React Router. You'll be migrating to the built-in routing with Next.js."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"npm uninstall react-router-dom\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Link"})," component for performing client-side route transitions is slightly different from React Router."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// Before (React Router)\nimport { Link } from 'react-router-dom'\n\nexport default function App() {\n  return <Link to=\"/about\">About</Link>\n}\n\n// After (Next.js)\nimport Link from 'next/link'\n\nexport default function App() {\n  return (\n    <Link href=\"/about\">\n      About\n    </Link>\n  )\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Most React applications that use React Router have a top-level navigation file, containing a list of routes. For example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:'import { BrowserRouter as Router, Switch, Route } from \'react-router-dom\'\n\nexport default function App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path="/about">\n          <h1>About</h1>\n        </Route>\n        <Route path="/blog">\n          <h1>Blog</h1>\n        </Route>\n        <Route path="/">\n          <h1>Home</h1>\n        </Route>\n      </Switch>\n    </Router>\n  )\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["With Next.js, you can express the same application structure in the file system. When a file is added to the ",(0,r.jsx)(n.a,{href:"/docs/basic-features/pages.md",children:(0,r.jsx)(n.code,{children:"pages"})})," directory it's automatically available as a route."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pages/about.js"})," \u2192 ",(0,r.jsx)(n.code,{children:"/about"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pages/blog.js"})," \u2192 ",(0,r.jsx)(n.code,{children:"/blog"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pages/index.js"})," \u2192 ",(0,r.jsx)(n.code,{children:"/"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"nested-routes",children:"Nested Routes"}),"\n",(0,r.jsxs)(n.p,{children:["In the example below, routes like ",(0,r.jsx)(n.code,{children:"/blog/my-post"})," would render the ",(0,r.jsx)(n.code,{children:"Post"})," component. If a slug was not provided, it would render the list of all blog posts."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"import {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  useRouteMatch,\n  useParams,\n} from 'react-router-dom'\n\nexport default function Blog() {\n  // Nested route under /blog\n  const match = useRouteMatch()\n\n  return (\n    <Router>\n      <Switch>\n        <Route path={`${match.path}/:slug`}>\n          <Post />\n        </Route>\n        <Route path={match.path}>\n          <h1>All Blog Posts</h1>\n        </Route>\n      </Switch>\n    </Router>\n  )\n}\n\nfunction Post() {\n  const { slug } = useParams()\n  return <h1>Post Slug: {slug}</h1>\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Rather than using the ",(0,r.jsx)(n.code,{children:":slug"})," syntax inside your ",(0,r.jsx)(n.code,{children:"Route"})," component, Next.js uses the ",(0,r.jsx)(n.code,{children:"[slug]"})," syntax in the file name for ",(0,r.jsx)(n.a,{href:"/docs/routing/dynamic-routes.md",children:"Dynamic Routes"}),". We can transform this to Next.js by creating two new files, ",(0,r.jsx)(n.code,{children:"pages/blog/index.js"})," (showing all pages) and ",(0,r.jsx)(n.code,{children:"pages/blog/[slug].js"})," (showing an individual post)."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// pages/blog/index.js\n\nexport default function Blog() {\n  return <h1>All Blog Posts</h1>\n}\n\n// pages/blog/[slug].js\n\nimport { useRouter } from 'next/router'\n\nexport default function Post() {\n  const router = useRouter()\n  const { slug } = router.query\n\n  return <h1>Post Slug: {slug}</h1>\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"server-rendering",children:"Server Rendering"}),"\n",(0,r.jsxs)(n.p,{children:["Next.js has built-in support for ",(0,r.jsx)(n.a,{href:"/docs/basic-features/pages#server-side-rendering.md",children:"Server-side Rendering"}),". This means you can remove any instances of ",(0,r.jsx)(n.code,{children:"StaticRouter"})," in your code."]}),"\n",(0,r.jsx)(n.h2,{id:"code-splitting",children:"Code Splitting"}),"\n",(0,r.jsxs)(n.p,{children:["Next.js has built-in support for ",(0,r.jsx)(n.a,{href:"https://reactrouter.com/web/guides/code-splitting",children:"Code Splitting"}),". This means you can remove any instances of:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@loadable/server"}),", ",(0,r.jsx)(n.code,{children:"@loadable/babel-plugin"}),", and ",(0,r.jsx)(n.code,{children:"@loadable/webpack-plugin"})]}),"\n",(0,r.jsxs)(n.li,{children:["Modifications to your ",(0,r.jsx)(n.code,{children:".babelrc"})," for ",(0,r.jsx)(n.code,{children:"@loadable/babel-plugin"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Each file inside your ",(0,r.jsx)(n.code,{children:"pages/"})," directory will be code split into its own JavaScript bundle during the build process. Next.js ",(0,r.jsx)(n.a,{href:"/docs/basic-features/supported-browsers-features.md#javascript-language-features",children:"also supports"})," ES2020 dynamic ",(0,r.jsx)(n.code,{children:"import()"})," for JavaScript. With it you can import JavaScript modules dynamically and work with them. They also work with SSR."]}),"\n",(0,r.jsxs)(n.p,{children:["For more information, read about ",(0,r.jsx)(n.a,{href:"https://nextjs.org/docs/advanced-features/dynamic-import",children:"Dynamic Imports"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"scroll-restoration",children:"Scroll Restoration"}),"\n",(0,r.jsxs)(n.p,{children:["Next.js has built-in support for ",(0,r.jsx)(n.a,{href:"https://reactrouter.com/web/guides/scroll-restoration",children:"Scroll Restoration"}),". This means you can remove any custom ",(0,r.jsx)(n.code,{children:"ScrollToTop"})," components you have defined."]}),"\n",(0,r.jsxs)(n.p,{children:["The default behavior of ",(0,r.jsx)(n.code,{children:"next/link"})," and ",(0,r.jsx)(n.code,{children:"next/router"})," is to scroll to the top of the page. You can also ",(0,r.jsx)(n.a,{href:"https://nextjs.org/docs/api-reference/next/link#disable-scrolling-to-the-top-of-the-page",children:"disable this"})," if you prefer."]}),"\n",(0,r.jsx)(n.h2,{id:"learn-more",children:"Learn More"}),"\n",(0,r.jsx)(n.p,{children:"For more information on what to do next, we recommend the following sections:"}),"\n",(0,r.jsx)("div",{class:"card",children:(0,r.jsxs)("a",{href:"/docs/routing/introduction.md",children:[(0,r.jsx)("b",{children:"Routing:"}),(0,r.jsx)("small",{children:"Learn more about routing in Next.js."})]})}),"\n",(0,r.jsx)("div",{class:"card",children:(0,r.jsxs)("a",{href:"/docs/routing/dynamic-routes.md",children:[(0,r.jsx)("b",{children:"Dynamic Routes:"}),(0,r.jsx)("small",{children:"Learn more about the built-in dynamic routes."})]})}),"\n",(0,r.jsx)("div",{class:"card",children:(0,r.jsxs)("a",{href:"/docs/api-reference/next/link.md",children:[(0,r.jsx)("b",{children:"Pages:"}),(0,r.jsx)("small",{children:"Enable client-side transitions with next/link."})]})})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>i});var r=t(7294);const s={},o=r.createContext(s);function i(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);