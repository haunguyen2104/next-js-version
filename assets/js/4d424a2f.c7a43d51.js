"use strict";(self.webpackChunknext_version=self.webpackChunknext_version||[]).push([[9661],{1810:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var i=t(5893),s=t(1151);const r={description:"The Next.js CLI allows you to start, build, and export your application. Learn more about it here."},o="Next.js CLI",a={id:"next-js/v13.0.1/api-reference/cli",title:"Next.js CLI",description:"The Next.js CLI allows you to start, build, and export your application. Learn more about it here.",source:"@site/docs/next-js/v13.0.1/api-reference/cli.md",sourceDirName:"next-js/v13.0.1/api-reference",slug:"/next-js/v13.0.1/api-reference/cli",permalink:"/next-js/v13.0.1/api-reference/cli",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/next-js/v13.0.1/api-reference/cli.md",tags:[],version:"current",frontMatter:{description:"The Next.js CLI allows you to start, build, and export your application. Learn more about it here."},sidebar:"tutorialSidebar",previous:{title:"Using MDX with Next.js",permalink:"/next-js/v13.0.1/advanced-features/using-mdx"},next:{title:"Create Next App",permalink:"/next-js/v13.0.1/api-reference/create-next-app"}},l={},d=[{value:"Build",id:"build",level:2},{value:"Development",id:"development",level:2},{value:"Production",id:"production",level:2},{value:"Keep Alive Timeout",id:"keep-alive-timeout",level:3},{value:"Lint",id:"lint",level:2},{value:"Telemetry",id:"telemetry",level:2},{value:"Info",id:"info",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"nextjs-cli",children:"Next.js CLI"}),"\n",(0,i.jsx)(n.p,{children:"The Next.js CLI allows you to start, build, and export your application."}),"\n",(0,i.jsx)(n.p,{children:"To get a list of the available CLI commands, run the following command inside your project directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx next -h\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["(",(0,i.jsx)(n.a,{href:"https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b",children:"npx"})," comes with npm 5.2+ and higher)"]})}),"\n",(0,i.jsx)(n.p,{children:"The output should look like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"Usage\n  $ next <command>\n\nAvailable commands\n  build, start, export, dev, lint, telemetry, info\n\nOptions\n  --version, -v   Version number\n  --help, -h      Displays this message\n\nFor more information run a command with the --help flag\n  $ next build --help\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can pass any ",(0,i.jsx)(n.a,{href:"https://nodejs.org/api/cli.html#cli_node_options_options",children:"node arguments"})," to ",(0,i.jsx)(n.code,{children:"next"})," commands:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"NODE_OPTIONS='--throw-deprecation' next\nNODE_OPTIONS='-r esm' next\nNODE_OPTIONS='--inspect' next\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Note: Running ",(0,i.jsx)(n.code,{children:"next"})," without a command is the same as running ",(0,i.jsx)(n.code,{children:"next dev"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"build",children:"Build"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"next build"})," creates an optimized production build of your application. The output displays information about each route."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Size"})," \u2013 The number of assets downloaded when navigating to the page client-side. The size for each route only includes its dependencies."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"First Load JS"})," \u2013 The number of assets downloaded when visiting the page from the server. The amount of JS shared by all is shown as a separate metric."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Both of these values are ",(0,i.jsx)(n.strong,{children:"compressed with gzip"}),". The first load is indicated by green, yellow, or red. Aim for green for performant applications."]}),"\n",(0,i.jsxs)(n.p,{children:["You can enable production profiling for React with the ",(0,i.jsx)(n.code,{children:"--profile"})," flag in ",(0,i.jsx)(n.code,{children:"next build"}),". This requires ",(0,i.jsx)(n.a,{href:"https://nextjs.org/blog/next-9-5",children:"Next.js 9.5"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"next build --profile\n"})}),"\n",(0,i.jsx)(n.p,{children:"After that, you can use the profiler in the same way as you would in development."}),"\n",(0,i.jsxs)(n.p,{children:["You can enable more verbose build output with the ",(0,i.jsx)(n.code,{children:"--debug"})," flag in ",(0,i.jsx)(n.code,{children:"next build"}),". This requires Next.js 9.5.3:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"next build --debug\n"})}),"\n",(0,i.jsx)(n.p,{children:"With this flag enabled additional build output like rewrites, redirects, and headers will be shown."}),"\n",(0,i.jsx)(n.h2,{id:"development",children:"Development"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"next dev"})," starts the application in development mode with hot-code reloading, error reporting, and more:"]}),"\n",(0,i.jsxs)(n.p,{children:["The application will start at ",(0,i.jsx)(n.code,{children:"http://localhost:3000"})," by default. The default port can be changed with ",(0,i.jsx)(n.code,{children:"-p"}),", like so:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx next dev -p 4000\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Or using the ",(0,i.jsx)(n.code,{children:"PORT"})," environment variable:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"PORT=4000 npx next dev\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Note: ",(0,i.jsx)(n.code,{children:"PORT"})," can not be set in ",(0,i.jsx)(n.code,{children:".env"})," as booting up the HTTP server happens before any other code is initialized."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You can also set the hostname to be different from the default of ",(0,i.jsx)(n.code,{children:"0.0.0.0"}),", this can be useful for making the application available for other devices on the network. The default hostname can be changed with ",(0,i.jsx)(n.code,{children:"-H"}),", like so:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx next dev -H 192.168.1.2\n"})}),"\n",(0,i.jsx)(n.h2,{id:"production",children:"Production"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"next start"})," starts the application in production mode. The application should be compiled with ",(0,i.jsx)(n.a,{href:"#build",children:(0,i.jsx)(n.code,{children:"next build"})})," first."]}),"\n",(0,i.jsxs)(n.p,{children:["The application will start at ",(0,i.jsx)(n.code,{children:"http://localhost:3000"})," by default. The default port can be changed with ",(0,i.jsx)(n.code,{children:"-p"}),", like so:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx next start -p 4000\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Or using the ",(0,i.jsx)(n.code,{children:"PORT"})," environment variable:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"PORT=4000 npx next start\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Note: ",(0,i.jsx)(n.code,{children:"PORT"})," can not be set in ",(0,i.jsx)(n.code,{children:".env"})," as booting up the HTTP server happens before any other code is initialized."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"keep-alive-timeout",children:"Keep Alive Timeout"}),"\n",(0,i.jsxs)(n.p,{children:["When deploying Next.js behind a downstream proxy (e.g. a load-balancer like AWS ELB/ALB) it's important to configure Next's underlying HTTP server with ",(0,i.jsx)(n.a,{href:"https://nodejs.org/api/http.html#http_server_keepalivetimeout",children:"keep-alive timeouts"})," that are ",(0,i.jsx)(n.em,{children:"larger"})," than the downstream proxy's timeouts. Otherwise, once a keep-alive timeout is reached for a given TCP connection, Node.js will immediately terminate that connection without notifying the downstream proxy. This results in a proxy error whenever it attempts to reuse a connection that Node.js has already terminated."]}),"\n",(0,i.jsxs)(n.p,{children:["To configure the timeout values for the production Next.js server, pass ",(0,i.jsx)(n.code,{children:"--keepAliveTimeout"})," (in milliseconds) to ",(0,i.jsx)(n.code,{children:"next start"}),", like so:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx next start --keepAliveTimeout 70000\n"})}),"\n",(0,i.jsx)(n.h2,{id:"lint",children:"Lint"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"next lint"})," runs ESLint for all files in the ",(0,i.jsx)(n.code,{children:"pages"}),", ",(0,i.jsx)(n.code,{children:"components"}),", and ",(0,i.jsx)(n.code,{children:"lib"})," directories. It also\nprovides a guided setup to install any required dependencies if ESLint is not already configured in\nyour application."]}),"\n",(0,i.jsxs)(n.p,{children:["If you have other directories that you would like to lint, you can specify them using the ",(0,i.jsx)(n.code,{children:"--dir"}),"\nflag:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"next lint --dir utils\n"})}),"\n",(0,i.jsx)(n.h2,{id:"telemetry",children:"Telemetry"}),"\n",(0,i.jsxs)(n.p,{children:["Next.js collects ",(0,i.jsx)(n.strong,{children:"completely anonymous"})," telemetry data about general usage.\nParticipation in this anonymous program is optional, and you may opt-out if you'd not like to share any information."]}),"\n",(0,i.jsxs)(n.p,{children:["To learn more about Telemetry, ",(0,i.jsx)(n.a,{href:"https://nextjs.org/telemetry/",children:"please read this document"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"info",children:"Info"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"next info"})," prints relevant details about the current system which can be used to report Next.js bugs.\nThis information includes Operating System platform/arch/version, Binaries (Node.js, npm, Yarn, pnpm) and npm package versions (",(0,i.jsx)(n.code,{children:"next"}),", ",(0,i.jsx)(n.code,{children:"react"}),", ",(0,i.jsx)(n.code,{children:"react-dom"}),")."]}),"\n",(0,i.jsx)(n.p,{children:"Running the following in your project's root directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"next info\n"})}),"\n",(0,i.jsx)(n.p,{children:"will give you information like this example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"\n    Operating System:\n      Platform: linux\n      Arch: x64\n      Version: #22-Ubuntu SMP Fri Nov 5 13:21:36 UTC 2021\n    Binaries:\n      Node: 16.13.0\n      npm: 8.1.0\n      Yarn: 1.22.17\n      pnpm: 6.24.2\n    Relevant packages:\n      next: 12.0.8\n      react: 17.0.2\n      react-dom: 17.0.2\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"This information should then be pasted into GitHub Issues."})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>o});var i=t(7294);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);