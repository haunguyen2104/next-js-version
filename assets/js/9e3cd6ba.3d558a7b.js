"use strict";(self.webpackChunknext_version=self.webpackChunknext_version||[]).push([[4639],{2723:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var s=n(5893),i=n(1151);const r={description:"Learn how to transition an existing Create React App project to Next.js."},a="Migrating from Create React App",o={id:"next-js/v13.0.0/migrating/from-create-react-app",title:"Migrating from Create React App",description:"Learn how to transition an existing Create React App project to Next.js.",source:"@site/docs/next-js/v13.0.0/migrating/from-create-react-app.md",sourceDirName:"next-js/v13.0.0/migrating",slug:"/next-js/v13.0.0/migrating/from-create-react-app",permalink:"/next-js/v13.0.0/migrating/from-create-react-app",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/next-js/v13.0.0/migrating/from-create-react-app.md",tags:[],version:"current",frontMatter:{description:"Learn how to transition an existing Create React App project to Next.js."},sidebar:"tutorialSidebar",previous:{title:"Building Forms with Next.js",permalink:"/next-js/v13.0.0/guides/building-forms"},next:{title:"Migrating from Gatsby",permalink:"/next-js/v13.0.0/migrating/from-gatsby"}},c={},d=[{value:"Updating <code>package.json</code> and dependencies",id:"updating-packagejson-and-dependencies",level:2},{value:"Static Assets and Compiled Output",id:"static-assets-and-compiled-output",level:2},{value:"Creating Routes &amp; Linking",id:"creating-routes--linking",level:2},{value:"Styling",id:"styling",level:2},{value:"Safely Accessing Web APIs",id:"safely-accessing-web-apis",level:2},{value:"Image Component and Image Optimization",id:"image-component-and-image-optimization",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Search Engine Optimization",id:"search-engine-optimization",level:2},{value:"Single-Page App (SPA)",id:"single-page-app-spa",level:2},{value:"Ejected Create React App",id:"ejected-create-react-app",level:2},{value:"Learn More",id:"learn-more",level:2}];function l(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"migrating-from-create-react-app",children:"Migrating from Create React App"}),"\n",(0,s.jsx)(t.p,{children:"This guide will help you understand how to transition from an existing non-ejected Create React App project to Next.js. Migrating to Next.js will allow you to:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Choose which ",(0,s.jsx)(t.a,{href:"/docs/basic-features/data-fetching/overview.md",children:"data fetching"})," strategy you want on a per-page basis."]}),"\n",(0,s.jsxs)(t.li,{children:["Use ",(0,s.jsx)(t.a,{href:"/docs/basic-features/data-fetching/incremental-static-regeneration.md",children:"Incremental Static Regeneration"})," to update ",(0,s.jsx)(t.em,{children:"existing"})," pages by re-rendering them in the background as traffic comes in."]}),"\n",(0,s.jsxs)(t.li,{children:["Use ",(0,s.jsx)(t.a,{href:"/docs/api-routes/introduction.md",children:"API Routes"}),"."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"And more! Let\u2019s walk through a series of steps to complete the migration."}),"\n",(0,s.jsxs)(t.h2,{id:"updating-packagejson-and-dependencies",children:["Updating ",(0,s.jsx)(t.code,{children:"package.json"})," and dependencies"]}),"\n",(0,s.jsxs)(t.p,{children:["The first step towards migrating to Next.js is to update ",(0,s.jsx)(t.code,{children:"package.json"})," and dependencies. You should:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Remove ",(0,s.jsx)(t.code,{children:"react-scripts"})," (but keep ",(0,s.jsx)(t.code,{children:"react"})," and ",(0,s.jsx)(t.code,{children:"react-dom"}),"). If you're using React Router, you can also remove ",(0,s.jsx)(t.code,{children:"react-router-dom"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Install ",(0,s.jsx)(t.code,{children:"next"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Add Next.js related commands to ",(0,s.jsx)(t.code,{children:"scripts"}),". One is ",(0,s.jsx)(t.code,{children:"next dev"}),", which runs a development server at ",(0,s.jsx)(t.code,{children:"localhost:3000"}),". You should also add ",(0,s.jsx)(t.code,{children:"next build"})," and ",(0,s.jsx)(t.code,{children:"next start"})," for creating and starting a production build."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Here's an example ",(0,s.jsx)(t.code,{children:"package.json"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "scripts": {\n    "dev": "next dev",\n    "build": "next build",\n    "start": "next start"\n  },\n  "dependencies": {\n    "next": "latest",\n    "react": "latest",\n    "react-dom": "latest"\n  }\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"static-assets-and-compiled-output",children:"Static Assets and Compiled Output"}),"\n",(0,s.jsxs)(t.p,{children:["Create React App uses the ",(0,s.jsx)(t.code,{children:"public"})," directory for the ",(0,s.jsx)(t.a,{href:"https://create-react-app.dev/docs/using-the-public-folder",children:"entry HTML file"})," as well as static assets, but Next.js only uses it for static assets. When migrating from Create React App, the location of the ",(0,s.jsx)(t.code,{children:"public"})," directory remains the same."]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Move any images, fonts, or other static assets to ",(0,s.jsx)(t.code,{children:"public"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Convert ",(0,s.jsx)(t.code,{children:"index.html"})," (the entry point of your application) to Next.js. Any ",(0,s.jsx)(t.code,{children:"<head>"})," code should be moved to a ",(0,s.jsxs)(t.a,{href:"/docs/advanced-features/custom-document.md",children:["custom ",(0,s.jsx)(t.code,{children:"_document.js"})]}),". Any shared layout between all pages should be moved to a ",(0,s.jsxs)(t.a,{href:"/docs/advanced-features/custom-app.md",children:["custom ",(0,s.jsx)(t.code,{children:"_app.js"})]}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["See ",(0,s.jsx)(t.a,{href:"#styling",children:"Styling"})," for CSS/Sass files."]}),"\n",(0,s.jsxs)(t.li,{children:["Add ",(0,s.jsx)(t.code,{children:".next"})," to ",(0,s.jsx)(t.code,{children:".gitignore"}),"."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"creating-routes--linking",children:"Creating Routes & Linking"}),"\n",(0,s.jsxs)(t.p,{children:["With Create React App, you're likely using React Router. Instead of using a third-party library, Next.js includes its own ",(0,s.jsx)(t.a,{href:"/docs/routing/introduction.md",children:"file-system based routing"}),"."]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Create a ",(0,s.jsx)(t.a,{href:"/docs/basic-features/pages.md",children:(0,s.jsx)(t.code,{children:"pages"})})," directory at the root of your project."]}),"\n",(0,s.jsxs)(t.li,{children:["Then, move the ",(0,s.jsx)(t.code,{children:"src/App.js"})," file to ",(0,s.jsx)(t.code,{children:"pages/index.js"}),". This file is the ",(0,s.jsx)(t.a,{href:"https://nextjs.org/docs/routing/introduction#index-routes",children:"index page"})," of your Next.js application. Populate this file with code that is used to display the index route in your Create React App."]}),"\n",(0,s.jsxs)(t.li,{children:["Convert all other ",(0,s.jsx)(t.code,{children:"Route"})," components to new files in the ",(0,s.jsx)(t.code,{children:"pages"})," directory."]}),"\n",(0,s.jsxs)(t.li,{children:["For routes that require dynamic content (e.g. ",(0,s.jsx)(t.code,{children:"/blog/:slug"}),"), you can use ",(0,s.jsx)(t.a,{href:"/docs/routing/dynamic-routes.md",children:"Dynamic Routes"})," with Next.js (e.g. ",(0,s.jsx)(t.code,{children:"pages/blog/[slug].js"}),"). The value of ",(0,s.jsx)(t.code,{children:"slug"})," is accessible through a ",(0,s.jsx)(t.a,{href:"/docs/routing/dynamic-routes.md",children:"query parameter"}),". For example, the route ",(0,s.jsx)(t.code,{children:"/blog/first-post"})," would forward the query object ",(0,s.jsx)(t.code,{children:"{ 'slug': 'first-post' }"})," to ",(0,s.jsx)(t.code,{children:"pages/blog/[slug].js"})," (",(0,s.jsx)(t.a,{href:"/docs/basic-features/data-fetching/get-static-paths.md",children:"learn more here"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["For more information, see ",(0,s.jsx)(t.a,{href:"/docs/migrating/from-react-router.md",children:"Migrating from React Router"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"styling",children:"Styling"}),"\n",(0,s.jsxs)(t.p,{children:["Next.js has built-in support for ",(0,s.jsx)(t.a,{href:"/docs/basic-features/built-in-css-support.md",children:"CSS"}),", ",(0,s.jsx)(t.a,{href:"/docs/basic-features/built-in-css-support.md#sass-support",children:"Sass"})," and ",(0,s.jsx)(t.a,{href:"/docs/basic-features/built-in-css-support.md#css-in-js",children:"CSS-in-JS"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["With Create React App, you can import ",(0,s.jsx)(t.code,{children:".css"})," files directly inside React components. Next.js allows you to do the same, but requires these files to be ",(0,s.jsx)(t.a,{href:"/docs/basic-features/built-in-css-support.md",children:"CSS Modules"}),". For global styles, you'll need a ",(0,s.jsxs)(t.a,{href:"/docs/advanced-features/custom-app.md",children:["custom ",(0,s.jsx)(t.code,{children:"_app.js"})]})," to add a ",(0,s.jsx)(t.a,{href:"/docs/basic-features/built-in-css-support.md#adding-a-global-stylesheet",children:"global stylesheet"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"safely-accessing-web-apis",children:"Safely Accessing Web APIs"}),"\n",(0,s.jsxs)(t.p,{children:["With client-side rendered applications (like Create React App), you can access ",(0,s.jsx)(t.code,{children:"window"}),", ",(0,s.jsx)(t.code,{children:"localStorage"}),", ",(0,s.jsx)(t.code,{children:"navigator"}),", and other ",(0,s.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API",children:"Web APIs"})," out of the box."]}),"\n",(0,s.jsxs)(t.p,{children:["Since Next.js uses ",(0,s.jsx)(t.a,{href:"/docs/basic-features/pages.md#pre-rendering",children:"pre-rendering"}),", you'll need to safely access those Web APIs only when you're on the client-side. For example, the following code snippet will allow access to ",(0,s.jsx)(t.code,{children:"window"})," only on the client-side."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:"if (typeof window !== 'undefined') {\n  // You now have access to `window`\n}\n"})}),"\n",(0,s.jsxs)(t.p,{children:["A recommended way of accessing Web APIs safely is by using the ",(0,s.jsx)(t.a,{href:"https://reactjs.org/docs/hooks-effect.html",children:(0,s.jsx)(t.code,{children:"useEffect"})})," hook, which only executes client-side:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:"import { useEffect } from 'react'\n\nuseEffect(() => {\n  // You now have access to `window`\n}, [])\n"})}),"\n",(0,s.jsx)(t.h2,{id:"image-component-and-image-optimization",children:"Image Component and Image Optimization"}),"\n",(0,s.jsxs)(t.p,{children:["Since version ",(0,s.jsx)(t.strong,{children:"10.0.0"}),", Next.js has a built-in ",(0,s.jsx)(t.a,{href:"/docs/basic-features/image-optimization.md",children:"Image Component and Automatic Image Optimization"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["The Next.js Image Component, ",(0,s.jsx)(t.a,{href:"/docs/api-reference/next/image.md",children:(0,s.jsx)(t.code,{children:"next/image"})}),", is an extension of the HTML ",(0,s.jsx)(t.code,{children:"<img>"})," element, evolved for the modern web."]}),"\n",(0,s.jsxs)(t.p,{children:["The Automatic Image Optimization allows for resizing, optimizing, and serving images in modern formats like ",(0,s.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types",children:"WebP"})," when the browser supports it. This avoids shipping large images to devices with a smaller viewport. It also allows Next.js to automatically adopt future image formats and serve them to browsers that support those formats."]}),"\n",(0,s.jsx)(t.p,{children:"Instead of optimizing images at build time, Next.js optimizes images on-demand, as users request them. Your build times aren't increased, whether shipping 10 images or 10 million images."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:'import Image from \'next/image\'\n\nexport default function Home() {\n  return (\n    <>\n      <h1>My Homepage</h1>\n      <Image\n        src="/me.png"\n        alt="Picture of the author"\n        width={500}\n        height={500}\n      />\n      <p>Welcome to my homepage!</p>\n    </>\n  )\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,s.jsxs)(t.p,{children:["Next.js has support for ",(0,s.jsx)(t.code,{children:".env"})," ",(0,s.jsx)(t.a,{href:"/docs/basic-features/environment-variables.md",children:"Environment Variables"})," similar to Create React App. The main difference is the prefix used to expose environment variables on the client-side."]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Change all environment variables with the ",(0,s.jsx)(t.code,{children:"REACT_APP_"})," prefix to ",(0,s.jsx)(t.code,{children:"NEXT_PUBLIC_"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Server-side environment variables will be available at build-time and in ",(0,s.jsx)(t.a,{href:"/docs/api-routes/introduction.md",children:"API Routes"}),"."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"search-engine-optimization",children:"Search Engine Optimization"}),"\n",(0,s.jsxs)(t.p,{children:["Most Create React App examples use ",(0,s.jsx)(t.code,{children:"react-helmet"})," to assist with adding ",(0,s.jsx)(t.code,{children:"meta"})," tags for proper SEO. With Next.js, we use ",(0,s.jsx)(t.a,{href:"/docs/api-reference/next/head.md",children:(0,s.jsx)(t.code,{children:"next/head"})})," to add ",(0,s.jsx)(t.code,{children:"meta"})," tags to your ",(0,s.jsx)(t.code,{children:"<head />"})," element. For example, here's an SEO component with Create React App:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:"// src/components/seo.js\n\nimport { Helmet } from 'react-helmet'\n\nexport default function SEO({ description, title, siteTitle }) {\n  return (\n    <Helmet\n      title={title}\n      titleTemplate={siteTitle ? `%s | ${siteTitle}` : null}\n      meta={[\n        {\n          name: `description`,\n          content: description,\n        },\n        {\n          property: `og:title`,\n          content: title,\n        },\n        {\n          property: `og:description`,\n          content: description,\n        },\n        {\n          property: `og:type`,\n          content: `website`,\n        },\n        {\n          name: `twitter:card`,\n          content: `summary`,\n        },\n        {\n          name: `twitter:creator`,\n          content: twitter,\n        },\n        {\n          name: `twitter:title`,\n          content: title,\n        },\n        {\n          name: `twitter:description`,\n          content: description,\n        },\n      ]}\n    />\n  )\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"And here's the same example using Next.js."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:'// src/components/seo.js\n\nimport Head from \'next/head\'\n\nexport default function SEO({ description, title, siteTitle }) {\n  return (\n    <Head>\n      <title>{`${title} | ${siteTitle}`}</title>\n      <meta name="description" content={description} />\n      <meta property="og:type" content="website" />\n      <meta property="og:title" content={title} />\n      <meta property="og:description" content={description} />\n      <meta property="og:site_name" content={siteTitle} />\n      <meta property="twitter:card" content="summary" />\n      <meta property="twitter:creator" content={config.social.twitter} />\n      <meta property="twitter:title" content={title} />\n      <meta property="twitter:description" content={description} />\n    </Head>\n  )\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"single-page-app-spa",children:"Single-Page App (SPA)"}),"\n",(0,s.jsxs)(t.p,{children:["If you want to move your existing Create React App to Next.js and keep a Single-Page App, you can move your old application's entry point to an ",(0,s.jsx)(t.a,{href:"/docs/routing/dynamic-routes.md#optional-catch-all-routes",children:"Optional Catch-All Route"})," named ",(0,s.jsx)(t.code,{children:"pages/[[...app]].js"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:"// pages/[[...app]].js\n\nimport { useState, useEffect } from 'react'\nimport CreateReactAppEntryPoint from '../components/app'\n\nfunction App() {\n  const [isMounted, setIsMounted] = useState(false)\n\n  useEffect(() => {\n    setIsMounted(true)\n  }, [])\n\n  if (!isMounted) {\n    return null\n  }\n\n  return <CreateReactAppEntryPoint />\n}\n\nexport default App\n"})}),"\n",(0,s.jsx)(t.h2,{id:"ejected-create-react-app",children:"Ejected Create React App"}),"\n",(0,s.jsx)(t.p,{children:"If you've ejected Create React App, here are some things to consider:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"If you have custom file loaders set up for CSS, Sass, or other assets, this is all built-in with Next.js."}),"\n",(0,s.jsxs)(t.li,{children:["If you've manually added ",(0,s.jsx)(t.a,{href:"/docs/basic-features/supported-browsers-features.md#javascript-language-features",children:"new JavaScript features"})," (e.g. Optional Chaining) or ",(0,s.jsx)(t.a,{href:"/docs/basic-features/supported-browsers-features.md#polyfills",children:"Polyfills"}),", check to see what's included by default with Next.js."]}),"\n",(0,s.jsxs)(t.li,{children:["If you have a custom code splitting setup, you can remove that. Next.js has automatic code splitting on a ",(0,s.jsx)(t.a,{href:"/docs/basic-features/pages.md",children:"per-page basis"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["You can ",(0,s.jsx)(t.a,{href:"/docs/advanced-features/customizing-postcss-config.md#default-behavior",children:"customize your PostCSS setup"})," with Next.js without ejecting from the framework."]}),"\n",(0,s.jsxs)(t.li,{children:["You should reference the default ",(0,s.jsx)(t.a,{href:"/docs/advanced-features/customizing-babel-config.md",children:"Babel config"})," and ",(0,s.jsx)(t.a,{href:"/docs/api-reference/next.config.js/custom-webpack-config.md",children:"Webpack config"})," of Next.js to see what's included by default."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"learn-more",children:"Learn More"}),"\n",(0,s.jsxs)(t.p,{children:["You can learn more about Next.js by completing our ",(0,s.jsx)(t.a,{href:"https://nextjs.org/learn/basics/create-nextjs-app",children:"starter tutorial"}),". If you have questions or if this guide didn't work for you, feel free to reach out to our community on ",(0,s.jsx)(t.a,{href:"https://github.com/vercel/next.js/discussions",children:"GitHub Discussions"}),"."]})]})}function p(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>o,a:()=>a});var s=n(7294);const i={},r=s.createContext(i);function a(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);