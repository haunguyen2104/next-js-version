"use strict";(self.webpackChunknext_version=self.webpackChunknext_version||[]).push([[2368],{5376:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var i=t(5893),a=t(1151);const o={description:"Next.js has built-in support for internationalized routing and language detection. Learn more here."},l="Internationalized Routing",r={id:"next-js/v13.0.1/advanced-features/i18n-routing",title:"Internationalized Routing",description:"Next.js has built-in support for internationalized routing and language detection. Learn more here.",source:"@site/docs/next-js/v13.0.1/advanced-features/i18n-routing.md",sourceDirName:"next-js/v13.0.1/advanced-features",slug:"/next-js/v13.0.1/advanced-features/i18n-routing",permalink:"/next-js/v13.0.1/advanced-features/i18n-routing",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/next-js/v13.0.1/advanced-features/i18n-routing.md",tags:[],version:"current",frontMatter:{description:"Next.js has built-in support for internationalized routing and language detection. Learn more here."},sidebar:"tutorialSidebar",previous:{title:"Error Handling",permalink:"/next-js/v13.0.1/advanced-features/error-handling"},next:{title:"Measuring performance",permalink:"/next-js/v13.0.1/advanced-features/measuring-performance"}},s={},c=[{value:"Getting started",id:"getting-started",level:2},{value:"Locale Strategies",id:"locale-strategies",level:2},{value:"Sub-path Routing",id:"sub-path-routing",level:3},{value:"Domain Routing",id:"domain-routing",level:3},{value:"Automatic Locale Detection",id:"automatic-locale-detection",level:2},{value:"Prefixing the Default Locale",id:"prefixing-the-default-locale",level:3},{value:"Disabling Automatic Locale Detection",id:"disabling-automatic-locale-detection",level:3},{value:"Accessing the locale information",id:"accessing-the-locale-information",level:2},{value:"Transition between locales",id:"transition-between-locales",level:2},{value:"Leveraging the NEXT_LOCALE cookie",id:"leveraging-the-next_locale-cookie",level:2},{value:"Search Engine Optimization",id:"search-engine-optimization",level:2},{value:"How does this work with Static Generation?",id:"how-does-this-work-with-static-generation",level:2},{value:"Dynamic Routes and <code>getStaticProps</code> Pages",id:"dynamic-routes-and-getstaticprops-pages",level:3},{value:"Automatically Statically Optimized Pages",id:"automatically-statically-optimized-pages",level:3},{value:"Non-dynamic getStaticProps Pages",id:"non-dynamic-getstaticprops-pages",level:3},{value:"Limits for the i18n config",id:"limits-for-the-i18n-config",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"internationalized-routing",children:"Internationalized Routing"}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"Examples"})}),(0,i.jsx)("ul",{children:(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:"https://github.com/vercel/next.js/tree/canary/examples/i18n-routing",children:"i18n routing"})})})]}),"\n",(0,i.jsxs)(n.p,{children:["Next.js has built-in support for internationalized (",(0,i.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Internationalization_and_localization#Naming",children:"i18n"}),") routing since ",(0,i.jsx)(n.code,{children:"v10.0.0"}),". You can provide a list of locales, the default locale, and domain-specific locales and Next.js will automatically handle the routing."]}),"\n",(0,i.jsxs)(n.p,{children:["The i18n routing support is currently meant to complement existing i18n library solutions like ",(0,i.jsx)(n.a,{href:"https://formatjs.io/docs/getting-started/installation",children:(0,i.jsx)(n.code,{children:"react-intl"})}),", ",(0,i.jsx)(n.a,{href:"https://react.i18next.com/",children:(0,i.jsx)(n.code,{children:"react-i18next"})}),", ",(0,i.jsx)(n.a,{href:"https://lingui.js.org/",children:(0,i.jsx)(n.code,{children:"lingui"})}),", ",(0,i.jsx)(n.a,{href:"https://github.com/lukeed/rosetta",children:(0,i.jsx)(n.code,{children:"rosetta"})}),", ",(0,i.jsx)(n.a,{href:"https://github.com/amannn/next-intl",children:(0,i.jsx)(n.code,{children:"next-intl"})})," and others by streamlining the routes and locale parsing."]}),"\n",(0,i.jsx)(n.h2,{id:"getting-started",children:"Getting started"}),"\n",(0,i.jsxs)(n.p,{children:["To get started, add the ",(0,i.jsx)(n.code,{children:"i18n"})," config to your ",(0,i.jsx)(n.code,{children:"next.config.js"})," file."]}),"\n",(0,i.jsxs)(n.p,{children:["Locales are ",(0,i.jsx)(n.a,{href:"https://www.unicode.org/reports/tr35/tr35-59/tr35.html#Identifiers",children:"UTS Locale Identifiers"}),", a standardized format for defining locales."]}),"\n",(0,i.jsxs)(n.p,{children:["Generally a Locale Identifier is made up of a language, region, and script separated by a dash: ",(0,i.jsx)(n.code,{children:"language-region-script"}),". The region and script are optional. An example:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"en-US"})," - English as spoken in the United States"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nl-NL"})," - Dutch as spoken in the Netherlands"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nl"})," - Dutch, no specific region"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If user locale is ",(0,i.jsx)(n.code,{children:"nl-BE"})," and it is not listed in your configuration, they will be redirected to ",(0,i.jsx)(n.code,{children:"nl"})," if available, or to the default locale otherwise.\nIf you don't plan to support all regions of a country, it is therefore a good practice to include country locales that will act as fallbacks."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// next.config.js\nmodule.exports = {\n  i18n: {\n    // These are all the locales you want to support in\n    // your application\n    locales: ['en-US', 'fr', 'nl-NL'],\n    // This is the default locale you want to be used when visiting\n    // a non-locale prefixed path e.g. `/hello`\n    defaultLocale: 'en-US',\n    // This is a list of locale domains and the default locale they\n    // should handle (these are only required when setting up domain routing)\n    // Note: subdomains must be included in the domain value to be matched e.g. \"fr.example.com\".\n    domains: [\n      {\n        domain: 'example.com',\n        defaultLocale: 'en-US',\n      },\n      {\n        domain: 'example.nl',\n        defaultLocale: 'nl-NL',\n      },\n      {\n        domain: 'example.fr',\n        defaultLocale: 'fr',\n        // an optional http field can also be used to test\n        // locale domains locally with http instead of https\n        http: true,\n      },\n    ],\n  },\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"locale-strategies",children:"Locale Strategies"}),"\n",(0,i.jsx)(n.p,{children:"There are two locale handling strategies: Sub-path Routing and Domain Routing."}),"\n",(0,i.jsx)(n.h3,{id:"sub-path-routing",children:"Sub-path Routing"}),"\n",(0,i.jsx)(n.p,{children:"Sub-path Routing puts the locale in the url path."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// next.config.js\nmodule.exports = {\n  i18n: {\n    locales: ['en-US', 'fr', 'nl-NL'],\n    defaultLocale: 'en-US',\n  },\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["With the above configuration ",(0,i.jsx)(n.code,{children:"en-US"}),", ",(0,i.jsx)(n.code,{children:"fr"}),", and ",(0,i.jsx)(n.code,{children:"nl-NL"})," will be available to be routed to, and ",(0,i.jsx)(n.code,{children:"en-US"})," is the default locale. If you have a ",(0,i.jsx)(n.code,{children:"pages/blog.js"})," the following urls would be available:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"/blog"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"/fr/blog"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"/nl-nl/blog"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The default locale does not have a prefix."}),"\n",(0,i.jsx)(n.h3,{id:"domain-routing",children:"Domain Routing"}),"\n",(0,i.jsx)(n.p,{children:"By using domain routing you can configure locales to be served from different domains:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// next.config.js\nmodule.exports = {\n  i18n: {\n    locales: ['en-US', 'fr', 'nl-NL', 'nl-BE'],\n    defaultLocale: 'en-US',\n\n    domains: [\n      {\n        // Note: subdomains must be included in the domain value to be matched\n        // e.g. www.example.com should be used if that is the expected hostname\n        domain: 'example.com',\n        defaultLocale: 'en-US',\n      },\n      {\n        domain: 'example.fr',\n        defaultLocale: 'fr',\n      },\n      {\n        domain: 'example.nl',\n        defaultLocale: 'nl-NL',\n        // specify other locales that should be redirected\n        // to this domain\n        locales: ['nl-BE'],\n      },\n    ],\n  },\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For example if you have ",(0,i.jsx)(n.code,{children:"pages/blog.js"})," the following urls will be available:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"example.com/blog"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"www.example.com/blog"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"example.fr/blog"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"example.nl/blog"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"example.nl/nl-BE/blog"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"automatic-locale-detection",children:"Automatic Locale Detection"}),"\n",(0,i.jsxs)(n.p,{children:["When a user visits the application root (generally ",(0,i.jsx)(n.code,{children:"/"}),"), Next.js will try to automatically detect which locale the user prefers based on the ",(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language",children:(0,i.jsx)(n.code,{children:"Accept-Language"})})," header and the current domain."]}),"\n",(0,i.jsx)(n.p,{children:"If a locale other than the default locale is detected, the user will be redirected to either:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"When using Sub-path Routing:"})," The locale prefixed path"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"When using Domain Routing:"})," The domain with that locale specified as the default"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["When using Domain Routing, if a user with the ",(0,i.jsx)(n.code,{children:"Accept-Language"})," header ",(0,i.jsx)(n.code,{children:"fr;q=0.9"})," visits ",(0,i.jsx)(n.code,{children:"example.com"}),", they will be redirected to ",(0,i.jsx)(n.code,{children:"example.fr"})," since that domain handles the ",(0,i.jsx)(n.code,{children:"fr"})," locale by default."]}),"\n",(0,i.jsxs)(n.p,{children:["When using Sub-path Routing, the user would be redirected to ",(0,i.jsx)(n.code,{children:"/fr"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"prefixing-the-default-locale",children:"Prefixing the Default Locale"}),"\n",(0,i.jsxs)(n.p,{children:["With Next.js 12 and ",(0,i.jsx)(n.a,{href:"/docs/middleware.md",children:"Middleware"}),", we can add a prefix to the default locale with a ",(0,i.jsx)(n.a,{href:"https://github.com/vercel/next.js/discussions/18419",children:"workaround"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, here's a ",(0,i.jsx)(n.code,{children:"next.config.js"})," file with support for a few languages. Note the ",(0,i.jsx)(n.code,{children:'"default"'})," locale has been added intentionally."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// next.config.js\n\nmodule.exports = {\n  i18n: {\n    locales: ['default', 'en', 'de', 'fr'],\n    defaultLocale: 'default',\n    localeDetection: false,\n  },\n  trailingSlash: true,\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Next, we can use ",(0,i.jsx)(n.a,{href:"/docs/middleware.md",children:"Middleware"})," to add custom routing rules:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// middleware.ts\n\nimport { NextRequest, NextResponse } from 'next/server'\n\nconst PUBLIC_FILE = /\\.(.*)$/\n\nexport async function middleware(req: NextRequest) {\n  if (\n    req.nextUrl.pathname.startsWith('/_next') ||\n    req.nextUrl.pathname.includes('/api/') ||\n    PUBLIC_FILE.test(req.nextUrl.pathname)\n  ) {\n    return\n  }\n\n  if (req.nextUrl.locale === 'default') {\n    const locale = req.cookies.get('NEXT_LOCALE') || 'en'\n\n    return NextResponse.redirect(\n      new URL(`/${locale}${req.nextUrl.pathname}${req.nextUrl.search}`, req.url)\n    )\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This ",(0,i.jsx)(n.a,{href:"/docs/middleware.md",children:"Middleware"})," skips adding the default prefix to ",(0,i.jsx)(n.a,{href:"/docs/api-routes/introduction.md",children:"API Routes"})," and ",(0,i.jsx)(n.a,{href:"/docs/basic-features/static-file-serving.md",children:"public"})," files like fonts or images. If a request is made to the default locale, we redirect to our prefix ",(0,i.jsx)(n.code,{children:"/en"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"disabling-automatic-locale-detection",children:"Disabling Automatic Locale Detection"}),"\n",(0,i.jsx)(n.p,{children:"The automatic locale detection can be disabled with:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// next.config.js\nmodule.exports = {\n  i18n: {\n    localeDetection: false,\n  },\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["When ",(0,i.jsx)(n.code,{children:"localeDetection"})," is set to ",(0,i.jsx)(n.code,{children:"false"})," Next.js will no longer automatically redirect based on the user's preferred locale and will only provide locale information detected from either the locale based domain or locale path as described above."]}),"\n",(0,i.jsx)(n.h2,{id:"accessing-the-locale-information",children:"Accessing the locale information"}),"\n",(0,i.jsxs)(n.p,{children:["You can access the locale information via the Next.js router. For example, using the ",(0,i.jsx)(n.a,{href:"/docs/api-reference/next/router.md#userouter",children:(0,i.jsx)(n.code,{children:"useRouter()"})})," hook the following properties are available:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"locale"})," contains the currently active locale."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"locales"})," contains all configured locales."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"defaultLocale"})," contains the configured default locale."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["When ",(0,i.jsx)(n.a,{href:"/docs/basic-features/pages.md#static-generation-recommended",children:"pre-rendering"})," pages with ",(0,i.jsx)(n.code,{children:"getStaticProps"})," or ",(0,i.jsx)(n.code,{children:"getServerSideProps"}),", the locale information is provided in ",(0,i.jsx)(n.a,{href:"/docs/basic-features/data-fetching/get-static-props.md",children:"the context"})," provided to the function."]}),"\n",(0,i.jsxs)(n.p,{children:["When leveraging ",(0,i.jsx)(n.code,{children:"getStaticPaths"}),", the configured locales are provided in the context parameter of the function under ",(0,i.jsx)(n.code,{children:"locales"})," and the configured defaultLocale under ",(0,i.jsx)(n.code,{children:"defaultLocale"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"transition-between-locales",children:"Transition between locales"}),"\n",(0,i.jsxs)(n.p,{children:["You can use ",(0,i.jsx)(n.code,{children:"next/link"})," or ",(0,i.jsx)(n.code,{children:"next/router"})," to transition between locales."]}),"\n",(0,i.jsxs)(n.p,{children:["For ",(0,i.jsx)(n.code,{children:"next/link"}),", a ",(0,i.jsx)(n.code,{children:"locale"})," prop can be provided to transition to a different locale from the currently active one. If no ",(0,i.jsx)(n.code,{children:"locale"})," prop is provided, the currently active ",(0,i.jsx)(n.code,{children:"locale"})," is used during client-transitions. For example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:'import Link from \'next/link\'\n\nexport default function IndexPage(props) {\n  return (\n    <Link href="/another" locale="fr">\n      To /fr/another\n    </Link>\n  )\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["When using the ",(0,i.jsx)(n.code,{children:"next/router"})," methods directly, you can specify the ",(0,i.jsx)(n.code,{children:"locale"})," that should be used via the transition options. For example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"import { useRouter } from 'next/router'\n\nexport default function IndexPage(props) {\n  const router = useRouter()\n\n  return (\n    <div\n      onClick={() => {\n        router.push('/another', '/another', { locale: 'fr' })\n      }}\n    >\n      to /fr/another\n    </div>\n  )\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Note that to handle switching only the ",(0,i.jsx)(n.code,{children:"locale"})," while preserving all routing information such as ",(0,i.jsx)(n.a,{href:"/docs/routing/dynamic-routes.md",children:"dynamic route"})," query values or hidden href query values, you can provide the ",(0,i.jsx)(n.code,{children:"href"})," parameter as an object:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"import { useRouter } from 'next/router'\nconst router = useRouter()\nconst { pathname, asPath, query } = router\n// change just the locale and maintain all other route information including href's query\nrouter.push({ pathname, query }, asPath, { locale: nextLocale })\n"})}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"/docs/api-reference/next/router.md#with-url-object",children:"here"})," for more information on the object structure for ",(0,i.jsx)(n.code,{children:"router.push"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["If you have a ",(0,i.jsx)(n.code,{children:"href"})," that already includes the locale you can opt-out of automatically handling the locale prefixing:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"import Link from 'next/link'\n\nexport default function IndexPage(props) {\n  return (\n    <Link href=\"/fr/another\" locale={false}>\n      To /fr/another\n    </Link>\n  )\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"leveraging-the-next_locale-cookie",children:"Leveraging the NEXT_LOCALE cookie"}),"\n",(0,i.jsxs)(n.p,{children:["Next.js supports overriding the accept-language header with a ",(0,i.jsx)(n.code,{children:"NEXT_LOCALE=the-locale"})," cookie. This cookie can be set using a language switcher and then when a user comes back to the site it will leverage the locale specified in the cookie when redirecting from ",(0,i.jsx)(n.code,{children:"/"})," to the correct locale location."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, if a user prefers the locale ",(0,i.jsx)(n.code,{children:"fr"})," in their accept-language header but a ",(0,i.jsx)(n.code,{children:"NEXT_LOCALE=en"})," cookie is set the ",(0,i.jsx)(n.code,{children:"en"})," locale when visiting ",(0,i.jsx)(n.code,{children:"/"})," the user will be redirected to the ",(0,i.jsx)(n.code,{children:"en"})," locale location until the cookie is removed or expired."]}),"\n",(0,i.jsx)(n.h2,{id:"search-engine-optimization",children:"Search Engine Optimization"}),"\n",(0,i.jsxs)(n.p,{children:["Since Next.js knows what language the user is visiting it will automatically add the ",(0,i.jsx)(n.code,{children:"lang"})," attribute to the ",(0,i.jsx)(n.code,{children:"<html>"})," tag."]}),"\n",(0,i.jsxs)(n.p,{children:["Next.js doesn't know about variants of a page so it's up to you to add the ",(0,i.jsx)(n.code,{children:"hreflang"})," meta tags using ",(0,i.jsx)(n.a,{href:"/docs/api-reference/next/head.md",children:(0,i.jsx)(n.code,{children:"next/head"})}),". You can learn more about ",(0,i.jsx)(n.code,{children:"hreflang"})," in the ",(0,i.jsx)(n.a,{href:"https://support.google.com/webmasters/answer/189077",children:"Google Webmasters documentation"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"how-does-this-work-with-static-generation",children:"How does this work with Static Generation?"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Note that Internationalized Routing does not integrate with ",(0,i.jsx)(n.a,{href:"/docs/advanced-features/static-html-export.md",children:(0,i.jsx)(n.code,{children:"next export"})})," as ",(0,i.jsx)(n.code,{children:"next export"})," does not leverage the Next.js routing layer. Hybrid Next.js applications that do not use ",(0,i.jsx)(n.code,{children:"next export"})," are fully supported."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"dynamic-routes-and-getstaticprops-pages",children:["Dynamic Routes and ",(0,i.jsx)(n.code,{children:"getStaticProps"})," Pages"]}),"\n",(0,i.jsxs)(n.p,{children:["For pages using ",(0,i.jsx)(n.code,{children:"getStaticProps"})," with ",(0,i.jsx)(n.a,{href:"/docs/routing/dynamic-routes.md",children:"Dynamic Routes"}),", all locale variants of the page desired to be prerendered need to be returned from ",(0,i.jsx)(n.a,{href:"/docs/basic-features/data-fetching/get-static-paths.md",children:(0,i.jsx)(n.code,{children:"getStaticPaths"})}),". Along with the ",(0,i.jsx)(n.code,{children:"params"})," object returned for ",(0,i.jsx)(n.code,{children:"paths"}),", you can also return a ",(0,i.jsx)(n.code,{children:"locale"})," field specifying which locale you want to render. For example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// pages/blog/[slug].js\nexport const getStaticPaths = ({ locales }) => {\n  return {\n    paths: [\n      // if no `locale` is provided only the defaultLocale will be generated\n      { params: { slug: 'post-1' }, locale: 'en-US' },\n      { params: { slug: 'post-1' }, locale: 'fr' },\n    ],\n    fallback: true,\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For ",(0,i.jsx)(n.a,{href:"/docs/advanced-features/automatic-static-optimization.md",children:"Automatically Statically Optimized"})," and non-dynamic ",(0,i.jsx)(n.code,{children:"getStaticProps"})," pages, ",(0,i.jsx)(n.strong,{children:"a version of the page will be generated for each locale"}),". This is important to consider because it can increase build times depending on how many locales are configured inside ",(0,i.jsx)(n.code,{children:"getStaticProps"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, if you have 50 locales configured with 10 non-dynamic pages using ",(0,i.jsx)(n.code,{children:"getStaticProps"}),", this means ",(0,i.jsx)(n.code,{children:"getStaticProps"})," will be called 500 times. 50 versions of the 10 pages will be generated during each build."]}),"\n",(0,i.jsxs)(n.p,{children:["To decrease the build time of dynamic pages with ",(0,i.jsx)(n.code,{children:"getStaticProps"}),", use a ",(0,i.jsxs)(n.a,{href:"/docs/api-reference/data-fetching/get-static-paths#fallback-true",children:[(0,i.jsx)(n.code,{children:"fallback"})," mode"]}),". This allows you to return only the most popular paths and locales from ",(0,i.jsx)(n.code,{children:"getStaticPaths"})," for prerendering during the build. Then, Next.js will build the remaining pages at runtime as they are requested."]}),"\n",(0,i.jsx)(n.h3,{id:"automatically-statically-optimized-pages",children:"Automatically Statically Optimized Pages"}),"\n",(0,i.jsxs)(n.p,{children:["For pages that are ",(0,i.jsx)(n.a,{href:"/docs/advanced-features/automatic-static-optimization.md",children:"automatically statically optimized"}),", a version of the page will be generated for each locale."]}),"\n",(0,i.jsx)(n.h3,{id:"non-dynamic-getstaticprops-pages",children:"Non-dynamic getStaticProps Pages"}),"\n",(0,i.jsxs)(n.p,{children:["For non-dynamic ",(0,i.jsx)(n.code,{children:"getStaticProps"})," pages, a version is generated for each locale like above. ",(0,i.jsx)(n.code,{children:"getStaticProps"})," is called with each ",(0,i.jsx)(n.code,{children:"locale"})," that is being rendered. If you would like to opt-out of a certain locale from being pre-rendered, you can return ",(0,i.jsx)(n.code,{children:"notFound: true"})," from ",(0,i.jsx)(n.code,{children:"getStaticProps"})," and this variant of the page will not be generated."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"export async function getStaticProps({ locale }) {\n  // Call an external API endpoint to get posts.\n  // You can use any data fetching library\n  const res = await fetch(`https://.../posts?locale=${locale}`)\n  const posts = await res.json()\n\n  if (posts.length === 0) {\n    return {\n      notFound: true,\n    }\n  }\n\n  // By returning { props: posts }, the Blog component\n  // will receive `posts` as a prop at build time\n  return {\n    props: {\n      posts,\n    },\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"limits-for-the-i18n-config",children:"Limits for the i18n config"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"locales"}),": 100 total locales"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"domains"}),": 100 total locale domain items"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," These limits have been added initially to prevent potential ",(0,i.jsx)(n.a,{href:"#dynamic-routes-and-getStaticProps-pages",children:"performance issues at build time"}),". You can workaround these limits with custom routing using ",(0,i.jsx)(n.a,{href:"/docs/middleware.md",children:"Middleware"})," in Next.js 12."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>r,a:()=>l});var i=t(7294);const a={},o=i.createContext(a);function l(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);