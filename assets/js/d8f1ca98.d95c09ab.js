"use strict";(self.webpackChunknext_version=self.webpackChunknext_version||[]).push([[616],{6600:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>a});var r=t(5893),i=t(1151);const s={description:"Configure Next.js to allow importing modules from external URLs (experimental)."},o="URL Imports",l={id:"next-js/v13.0.1/api-reference/next.config.js/url-imports",title:"URL Imports",description:"Configure Next.js to allow importing modules from external URLs (experimental).",source:"@site/docs/next-js/v13.0.1/api-reference/next.config.js/url-imports.md",sourceDirName:"next-js/v13.0.1/api-reference/next.config.js",slug:"/next-js/v13.0.1/api-reference/next.config.js/url-imports",permalink:"/next-js/v13.0.1/api-reference/next.config.js/url-imports",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/next-js/v13.0.1/api-reference/next.config.js/url-imports.md",tags:[],version:"current",frontMatter:{description:"Configure Next.js to allow importing modules from external URLs (experimental)."},sidebar:"tutorialSidebar",previous:{title:"Trailing Slash",permalink:"/next-js/v13.0.1/api-reference/next.config.js/trailing-slash"},next:{title:"Dynamic API Routes",permalink:"/next-js/v13.0.1/api-routes/dynamic-api-routes"}},c={},a=[{value:"Security Model",id:"security-model",level:2},{value:"Lockfile",id:"lockfile",level:2},{value:"Examples",id:"examples",level:2},{value:"Skypack",id:"skypack",level:3},{value:"Static Image Imports",id:"static-image-imports",level:3},{value:"URLs in CSS",id:"urls-in-css",level:3},{value:"Asset Imports",id:"asset-imports",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"url-imports",children:"URL Imports"}),"\n",(0,r.jsx)(n.p,{children:"URL imports are an experimental feature that allows you to import modules directly from external servers (instead of from the local disk)."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Warning"}),": This feature is experimental. Only use domains that you trust to download and execute on your machine. Please exercise\ndiscretion, and caution until the feature is flagged as stable."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["To opt-in, add the allowed URL prefixes inside ",(0,r.jsx)(n.code,{children:"next.config.js"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"module.exports = {\n  experimental: {\n    urlImports: ['https://example.com/modules/'],\n  },\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Then, you can import modules directly from URLs:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import { a, b, c } from 'https://example.com/modules/some/module.js'\n"})}),"\n",(0,r.jsx)(n.p,{children:"URL Imports can be used everywhere normal package imports can be used."}),"\n",(0,r.jsx)(n.h2,{id:"security-model",children:"Security Model"}),"\n",(0,r.jsxs)(n.p,{children:["This feature is being designed with ",(0,r.jsx)(n.strong,{children:"security as the top priority"}),". To start, we added an experimental flag forcing you to explicitly allow the domains you accept URL imports from. We're working to take this further by limiting URL imports to execute in the browser sandbox using the ",(0,r.jsx)(n.a,{href:"/docs/api-reference/edge-runtime.md",children:"Edge Runtime"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"lockfile",children:"Lockfile"}),"\n",(0,r.jsxs)(n.p,{children:["When using URL imports, Next.js will create a lockfile in the ",(0,r.jsx)(n.code,{children:"next.lock"})," directory.\nThis directory is intended to be committed to Git and should ",(0,r.jsx)(n.strong,{children:"not be included"})," in your ",(0,r.jsx)(n.code,{children:".gitignore"})," file."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["When running ",(0,r.jsx)(n.code,{children:"next dev"}),", Next.js will download and add all newly discovered URL Imports to your lockfile"]}),"\n",(0,r.jsxs)(n.li,{children:["When running ",(0,r.jsx)(n.code,{children:"next build"}),", Next.js will use only the lockfile to build the application for production"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Typically, no network requests are needed and any outdated lockfile will cause the build to fail.\nOne exception is resources that respond with ",(0,r.jsx)(n.code,{children:"Cache-Control: no-cache"}),".\nThese resources will have a ",(0,r.jsx)(n.code,{children:"no-cache"})," entry in the lockfile and will always be fetched from the network on each build."]}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"skypack",children:"Skypack"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import confetti from 'https://cdn.skypack.dev/canvas-confetti'\nimport { useEffect } from 'react'\n\nexport default () => {\n  useEffect(() => {\n    confetti()\n  })\n  return <p>Hello</p>\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"static-image-imports",children:"Static Image Imports"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import Image from 'next/image'\nimport logo from 'https://github.com/vercel/next.js/raw/canary/test/integration/production/public/vercel.png'\n\nexport default () => (\n  <div>\n    <Image src={logo} placeholder=\"blur\" />\n  </div>\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"urls-in-css",children:"URLs in CSS"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:".className {\n  background: url('https://github.com/vercel/next.js/raw/canary/test/integration/production/public/vercel.png');\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"asset-imports",children:"Asset Imports"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import Image from 'next/image'\n\nconst logo = new URL(\n  'https://github.com/vercel/next.js/raw/canary/test/integration/production/public/vercel.png',\n  import.meta.url\n)\n\nexport default () => <div>{logo.pathname}</div>\n"})})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>o});var r=t(7294);const i={},s=r.createContext(i);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);