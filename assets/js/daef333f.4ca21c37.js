"use strict";(self.webpackChunknext_version=self.webpackChunknext_version||[]).push([[9067],{4123:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var n=t(5893),s=t(1151);const o={description:"Override and extend the built-in Error page to handle custom errors."},a="Custom Error Page",i={id:"next-js/v13.0.0/advanced-features/custom-error-page",title:"Custom Error Page",description:"Override and extend the built-in Error page to handle custom errors.",source:"@site/docs/next-js/v13.0.0/advanced-features/custom-error-page.md",sourceDirName:"next-js/v13.0.0/advanced-features",slug:"/next-js/v13.0.0/advanced-features/custom-error-page",permalink:"/next-js/v13.0.0/advanced-features/custom-error-page",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/next-js/v13.0.0/advanced-features/custom-error-page.md",tags:[],version:"current",frontMatter:{description:"Override and extend the built-in Error page to handle custom errors."},sidebar:"tutorialSidebar",previous:{title:"Custom Document",permalink:"/next-js/v13.0.0/advanced-features/custom-document"},next:{title:"Custom Server",permalink:"/next-js/v13.0.0/advanced-features/custom-server"}},d={},c=[{value:"404 Page",id:"404-page",level:2},{value:"Customizing The 404 Page",id:"customizing-the-404-page",level:3},{value:"500 Page",id:"500-page",level:2},{value:"Customizing The 500 Page",id:"customizing-the-500-page",level:3},{value:"More Advanced Error Page Customizing",id:"more-advanced-error-page-customizing",level:3},{value:"Reusing the built-in error page",id:"reusing-the-built-in-error-page",level:3},{value:"Caveats",id:"caveats",level:3}];function l(e){const r={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h1,{id:"custom-error-page",children:"Custom Error Page"}),"\n",(0,n.jsx)(r.h2,{id:"404-page",children:"404 Page"}),"\n",(0,n.jsx)(r.p,{children:"A 404 page may be accessed very often. Server-rendering an error page for every visit increases the load of the Next.js server. This can result in increased costs and slow experiences."}),"\n",(0,n.jsx)(r.p,{children:"To avoid the above pitfalls, Next.js provides a static 404 page by default without having to add any additional files."}),"\n",(0,n.jsx)(r.h3,{id:"customizing-the-404-page",children:"Customizing The 404 Page"}),"\n",(0,n.jsxs)(r.p,{children:["To create a custom 404 page you can create a ",(0,n.jsx)(r.code,{children:"pages/404.js"})," file. This file is statically generated at build time."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-jsx",children:"// pages/404.js\nexport default function Custom404() {\n  return <h1>404 - Page Not Found</h1>\n}\n"})}),"\n",(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Note"}),": You can use ",(0,n.jsx)(r.a,{href:"/docs/basic-features/data-fetching/get-static-props.md",children:(0,n.jsx)(r.code,{children:"getStaticProps"})})," inside this page if you need to fetch data at build time."]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"500-page",children:"500 Page"}),"\n",(0,n.jsx)(r.p,{children:"Server-rendering an error page for every visit adds complexity to responding to errors. To help users get responses to errors as fast as possible, Next.js provides a static 500 page by default without having to add any additional files."}),"\n",(0,n.jsx)(r.h3,{id:"customizing-the-500-page",children:"Customizing The 500 Page"}),"\n",(0,n.jsxs)(r.p,{children:["To customize the 500 page you can create a ",(0,n.jsx)(r.code,{children:"pages/500.js"})," file. This file is statically generated at build time."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-jsx",children:"// pages/500.js\nexport default function Custom500() {\n  return <h1>500 - Server-side error occurred</h1>\n}\n"})}),"\n",(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Note"}),": You can use ",(0,n.jsx)(r.a,{href:"/docs/basic-features/data-fetching/get-static-props.md",children:(0,n.jsx)(r.code,{children:"getStaticProps"})})," inside this page if you need to fetch data at build time."]}),"\n"]}),"\n",(0,n.jsx)(r.h3,{id:"more-advanced-error-page-customizing",children:"More Advanced Error Page Customizing"}),"\n",(0,n.jsxs)(r.p,{children:["500 errors are handled both client-side and server-side by the ",(0,n.jsx)(r.code,{children:"Error"})," component. If you wish to override it, define the file ",(0,n.jsx)(r.code,{children:"pages/_error.js"})," and add the following code:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-jsx",children:"function Error({ statusCode }) {\n  return (\n    <p>\n      {statusCode\n        ? `An error ${statusCode} occurred on server`\n        : 'An error occurred on client'}\n    </p>\n  )\n}\n\nError.getInitialProps = ({ res, err }) => {\n  const statusCode = res ? res.statusCode : err ? err.statusCode : 404\n  return { statusCode }\n}\n\nexport default Error\n"})}),"\n",(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"pages/_error.js"})," is only used in production. In development you\u2019ll get an error with the call stack to know where the error originated from."]}),"\n"]}),"\n",(0,n.jsx)(r.h3,{id:"reusing-the-built-in-error-page",children:"Reusing the built-in error page"}),"\n",(0,n.jsxs)(r.p,{children:["If you want to render the built-in error page you can by importing the ",(0,n.jsx)(r.code,{children:"Error"})," component:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-jsx",children:"import Error from 'next/error'\n\nexport async function getServerSideProps() {\n  const res = await fetch('https://api.github.com/repos/vercel/next.js')\n  const errorCode = res.ok ? false : res.status\n  const json = await res.json()\n\n  return {\n    props: { errorCode, stars: json.stargazers_count },\n  }\n}\n\nexport default function Page({ errorCode, stars }) {\n  if (errorCode) {\n    return <Error statusCode={errorCode} />\n  }\n\n  return <div>Next stars: {stars}</div>\n}\n"})}),"\n",(0,n.jsxs)(r.p,{children:["The ",(0,n.jsx)(r.code,{children:"Error"})," component also takes ",(0,n.jsx)(r.code,{children:"title"})," as a property if you want to pass in a text message along with a ",(0,n.jsx)(r.code,{children:"statusCode"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["If you have a custom ",(0,n.jsx)(r.code,{children:"Error"})," component be sure to import that one instead. ",(0,n.jsx)(r.code,{children:"next/error"})," exports the default component used by Next.js."]}),"\n",(0,n.jsx)(r.h3,{id:"caveats",children:"Caveats"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"Error"})," does not currently support Next.js ",(0,n.jsx)(r.a,{href:"/docs/basic-features/data-fetching.md",children:"Data Fetching methods"})," like ",(0,n.jsx)(r.a,{href:"/docs/basic-features/data-fetching/get-static-props.md",children:(0,n.jsx)(r.code,{children:"getStaticProps"})})," or ",(0,n.jsx)(r.a,{href:"/docs/basic-features/data-fetching/get-server-side-props.md",children:(0,n.jsx)(r.code,{children:"getServerSideProps"})}),"."]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"_error"}),", like ",(0,n.jsx)(r.code,{children:"_app"}),", is a reserved pathname. ",(0,n.jsx)(r.code,{children:"_error"})," is used to define the customized layouts and behaviors of the error pages. ",(0,n.jsx)(r.code,{children:"/_error"})," will render 404 when accessed directly via ",(0,n.jsx)(r.a,{href:"/docs/routing/introduction",children:"routing"})," or rendering in a ",(0,n.jsx)(r.a,{href:"/docs/advanced-features/custom-server",children:"custom server"}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,s.a)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},1151:(e,r,t)=>{t.d(r,{Z:()=>i,a:()=>a});var n=t(7294);const s={},o=n.createContext(s);function a(e){const r=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(o.Provider,{value:r},e.children)}}}]);