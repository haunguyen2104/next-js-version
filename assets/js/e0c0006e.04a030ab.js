"use strict";(self.webpackChunknext_version=self.webpackChunknext_version||[]).push([[3685],{4743:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var r=t(5893),s=t(1151);const a={description:"Edge API Routes enable you to build high performance APIs directly inside your Next.js application."},i="Edge API Routes (Beta)",o={id:"next-js/v13.0.0/api-routes/edge-api-routes",title:"Edge API Routes (Beta)",description:"Edge API Routes enable you to build high performance APIs directly inside your Next.js application.",source:"@site/docs/next-js/v13.0.0/api-routes/edge-api-routes.md",sourceDirName:"next-js/v13.0.0/api-routes",slug:"/next-js/v13.0.0/api-routes/edge-api-routes",permalink:"/next-js/v13.0.0/api-routes/edge-api-routes",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/next-js/v13.0.0/api-routes/edge-api-routes.md",tags:[],version:"current",frontMatter:{description:"Edge API Routes enable you to build high performance APIs directly inside your Next.js application."},sidebar:"tutorialSidebar",previous:{title:"Dynamic API Routes",permalink:"/next-js/v13.0.0/api-routes/dynamic-api-routes"},next:{title:"API Routes",permalink:"/next-js/v13.0.0/api-routes/introduction"}},d={},c=[{value:"Examples",id:"examples",level:2},{value:"Basic",id:"basic",level:3},{value:"JSON Response",id:"json-response",level:3},{value:"Cache-Control",id:"cache-control",level:3},{value:"Query Parameters",id:"query-parameters",level:3},{value:"Forwarding Headers",id:"forwarding-headers",level:3},{value:"Differences between API Routes",id:"differences-between-api-routes",level:2}];function p(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"edge-api-routes-beta",children:"Edge API Routes (Beta)"}),"\n",(0,r.jsxs)(n.p,{children:["Edge API Routes enable you to build high performance APIs with Next.js. Using the ",(0,r.jsx)(n.a,{href:"/docs/api-reference/edge-runtime.md",children:"Edge Runtime"}),", they are often faster than Node.js-based API Routes. This performance improvement does come with ",(0,r.jsx)(n.a,{href:"/docs/api-reference/edge-runtime.md#unsupported-apis",children:"constraints"}),", like not having access to native Node.js APIs. Instead, Edge API Routes are built on standard Web APIs."]}),"\n",(0,r.jsxs)(n.p,{children:["Any file inside the folder ",(0,r.jsx)(n.code,{children:"pages/api"})," is mapped to ",(0,r.jsx)(n.code,{children:"/api/*"})," and will be treated as an API endpoint instead of a page. They are server-side only bundles and won't increase your client-side bundle size."]}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"basic",children:"Basic"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export const config = {\n  runtime: 'experimental-edge',\n}\n\nexport default (req) => new Response('Hello world!')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"json-response",children:"JSON Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import type { NextRequest } from 'next/server'\n\nexport const config = {\n  runtime: 'experimental-edge',\n}\n\nexport default async function handler(req: NextRequest) {\n  return new Response(\n    JSON.stringify({\n      name: 'Jim Halpert',\n    }),\n    {\n      status: 200,\n      headers: {\n        'content-type': 'application/json',\n      },\n    }\n  )\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"cache-control",children:"Cache-Control"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import type { NextRequest } from 'next/server'\n\nexport const config = {\n  runtime: 'experimental-edge',\n}\n\nexport default async function handler(req: NextRequest) {\n  return new Response(\n    JSON.stringify({\n      name: 'Jim Halpert',\n    }),\n    {\n      status: 200,\n      headers: {\n        'content-type': 'application/json',\n        'cache-control': 'public, s-maxage=1200, stale-while-revalidate=600',\n      },\n    }\n  )\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import type { NextRequest } from 'next/server'\n\nexport const config = {\n  runtime: 'experimental-edge',\n}\n\nexport default async function handler(req: NextRequest) {\n  const { searchParams } = new URL(req.url)\n  const email = searchParams.get('email')\n  return new Response(email)\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"forwarding-headers",children:"Forwarding Headers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { type NextRequest } from 'next/server'\n\nexport const config = {\n  runtime: 'experimental-edge',\n}\n\nexport default async function handler(req: NextRequest) {\n  const authorization = req.cookies.get('authorization')\n  return fetch('https://backend-api.com/api/protected', {\n    method: req.method,\n    headers: {\n      authorization,\n    },\n    redirect: 'manual',\n  })\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"differences-between-api-routes",children:"Differences between API Routes"}),"\n",(0,r.jsxs)(n.p,{children:["Edge API Routes use the ",(0,r.jsx)(n.a,{href:"/docs/api-reference/edge-runtime.md",children:"Edge Runtime"}),", whereas API Routes use the ",(0,r.jsx)(n.a,{href:"/docs/advanced-features/react-18/switchable-runtime.md",children:"Node.js runtime"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Edge API Routes can ",(0,r.jsx)(n.a,{href:"/docs/api-reference/edge-runtime.md#web-stream-apis",children:"stream responses"})," from the server and run ",(0,r.jsx)(n.em,{children:"after"})," cached files (e.g. HTML, CSS, JavaScript) have been accessed. Server-side streaming can help improve performance with faster ",(0,r.jsx)(n.a,{href:"https://web.dev/ttfb/",children:"Time To First Byte (TTFB)"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["View the ",(0,r.jsx)(n.a,{href:"/docs/api-reference/edge-runtime.md",children:"supported APIs"})," and ",(0,r.jsx)(n.a,{href:"/docs/api-reference/edge-runtime.md#unsupported-apis",children:"unsupported APIs"})," for the Edge Runtime."]})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>i});var r=t(7294);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);