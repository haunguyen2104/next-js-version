"use strict";(self.webpackChunknext_version=self.webpackChunknext_version||[]).push([[8800],{3896:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>d});var r=t(5893),s=t(1151);const a={description:"Dynamically import JavaScript modules and React Components and split your code into manageable chunks."},i="Dynamic Import",o={id:"next-js/v13.0.0/advanced-features/dynamic-import",title:"Dynamic Import",description:"Dynamically import JavaScript modules and React Components and split your code into manageable chunks.",source:"@site/docs/next-js/v13.0.0/advanced-features/dynamic-import.md",sourceDirName:"next-js/v13.0.0/advanced-features",slug:"/next-js/v13.0.0/advanced-features/dynamic-import",permalink:"/next-js/v13.0.0/advanced-features/dynamic-import",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/next-js/v13.0.0/advanced-features/dynamic-import.md",tags:[],version:"current",frontMatter:{description:"Dynamically import JavaScript modules and React Components and split your code into manageable chunks."},sidebar:"tutorialSidebar",previous:{title:"Debugging",permalink:"/next-js/v13.0.0/advanced-features/debugging"},next:{title:"Error Handling",permalink:"/next-js/v13.0.0/advanced-features/error-handling"}},c={},d=[{value:"Example",id:"example",level:2},{value:"With named exports",id:"with-named-exports",level:2},{value:"With no SSR",id:"with-no-ssr",level:2},{value:"With external libraries",id:"with-external-libraries",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"dynamic-import",children:"Dynamic Import"}),"\n",(0,r.jsxs)(t,{open:!0,children:[(0,r.jsx)("summary",{children:(0,r.jsx)("b",{children:"Examples"})}),(0,r.jsx)("ul",{children:(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://github.com/vercel/next.js/tree/canary/examples/with-dynamic-import",children:"Dynamic Import"})})})]}),"\n",(0,r.jsxs)(n.p,{children:["Next.js supports lazy loading external libraries with ",(0,r.jsx)(n.code,{children:"import()"})," and React components with ",(0,r.jsx)(n.code,{children:"next/dynamic"}),". Deferred loading helps improve the initial loading performance by decreasing the amount of JavaScript necessary to render the page. Components or libraries are only imported and included in the JavaScript bundle when they're used."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"next/dynamic"})," is an extension of ",(0,r.jsx)(n.a,{href:"https://reactjs.org/docs/code-splitting.html#reactlazy",children:(0,r.jsx)(n.code,{children:"React.lazy"})}),". When used in combination with ",(0,r.jsx)(n.a,{href:"https://reactjs.org/docs/react-api.html#reactsuspense",children:(0,r.jsx)(n.code,{children:"Suspense"})}),", components can delay hydration until the Suspense boundary is resolved."]}),"\n",(0,r.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,r.jsxs)(n.p,{children:["By using ",(0,r.jsx)(n.code,{children:"next/dynamic"}),", the header component will not be included in the page's initial JavaScript bundle. The page will render the Suspense ",(0,r.jsx)(n.code,{children:"fallback"})," first, followed by the ",(0,r.jsx)(n.code,{children:"Header"})," component when the ",(0,r.jsx)(n.code,{children:"Suspense"})," boundary is resolved."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"import dynamic from 'next/dynamic'\nimport { Suspense } from 'react'\n\nconst DynamicHeader = dynamic(() => import('../components/header'), {\n  suspense: true,\n})\n\nexport default function Home() {\n  return (\n    <Suspense fallback={`Loading...`}>\n      <DynamicHeader />\n    </Suspense>\n  )\n}\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note"}),": In ",(0,r.jsx)(n.code,{children:"import('path/to/component')"}),", the path must be explicitly written. It can't be a template string nor a variable. Furthermore the ",(0,r.jsx)(n.code,{children:"import()"})," has to be inside the ",(0,r.jsx)(n.code,{children:"dynamic()"})," call for Next.js to be able to match webpack bundles / module ids to the specific ",(0,r.jsx)(n.code,{children:"dynamic()"})," call and preload them before rendering. ",(0,r.jsx)(n.code,{children:"dynamic()"})," can't be used inside of React rendering as it needs to be marked in the top level of the module for preloading to work, similar to ",(0,r.jsx)(n.code,{children:"React.lazy"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["If you are not using React 18, you can use the ",(0,r.jsx)(n.code,{children:"loading"})," attribute in place of the Suspense ",(0,r.jsx)(n.code,{children:"fallback"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"const DynamicHeader = dynamic(() => import('../components/header'), {\n  loading: () => <div>Loading...</div>,\n})\n"})}),"\n",(0,r.jsx)(n.h2,{id:"with-named-exports",children:"With named exports"}),"\n",(0,r.jsxs)(n.p,{children:["To dynamically import a named export, you can return it from the ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",children:"Promise"})," returned by ",(0,r.jsx)(n.a,{href:"https://github.com/tc39/proposal-dynamic-import#example",children:(0,r.jsx)(n.code,{children:"import()"})}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// components/hello.js\nexport function Hello() {\n  return <p>Hello!</p>\n}\n\n// pages/index.js\nimport dynamic from 'next/dynamic'\n\nconst DynamicComponent = dynamic(() =>\n  import('../components/hello').then((mod) => mod.Hello)\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"with-no-ssr",children:"With no SSR"}),"\n",(0,r.jsxs)(n.p,{children:["To dynamically load a component on the client side, you can use the ",(0,r.jsx)(n.code,{children:"ssr"})," option to disable server-rendering. This is useful if an external dependency or component relies on browser APIs like ",(0,r.jsx)(n.code,{children:"window"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"import dynamic from 'next/dynamic'\n\nconst DynamicHeader = dynamic(() => import('../components/header'), {\n  ssr: false,\n})\n"})}),"\n",(0,r.jsx)(n.h2,{id:"with-external-libraries",children:"With external libraries"}),"\n",(0,r.jsxs)(n.p,{children:["This example uses the external library ",(0,r.jsx)(n.code,{children:"fuse.js"})," for fuzzy search. The module is only loaded in the browser after the user types in the search input."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"import { useState } from 'react'\n\nconst names = ['Tim', 'Joe', 'Bel', 'Lee']\n\nexport default function Page() {\n  const [results, setResults] = useState()\n\n  return (\n    <div>\n      <input\n        type=\"text\"\n        placeholder=\"Search\"\n        onChange={async (e) => {\n          const { value } = e.currentTarget\n          // Dynamically load fuse.js\n          const Fuse = (await import('fuse.js')).default\n          const fuse = new Fuse(names)\n\n          setResults(fuse.search(value))\n        }}\n      />\n      <pre>Results: {JSON.stringify(results, null, 2)}</pre>\n    </div>\n  )\n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>i});var r=t(7294);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);