<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-next-js/v13.0.1/api-reference/next/server" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">next/server | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/next-js/v13.0.1/api-reference/next/server"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="next/server | My Site"><meta data-rh="true" name="description" content="Learn about the server-only helpers for Middleware and Edge API Routes."><meta data-rh="true" property="og:description" content="Learn about the server-only helpers for Middleware and Edge API Routes."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/next-js/v13.0.1/api-reference/next/server"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/next-js/v13.0.1/api-reference/next/server" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/next-js/v13.0.1/api-reference/next/server" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a8ad30a2.css">
<script src="/assets/js/runtime~main.66066dd9.js" defer="defer"></script>
<script src="/assets/js/main.87237935.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Tutorial</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/next-js/v13.0.0/accessibility">next-js</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/next-js/v13.0.0/accessibility">v13.0.0</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/next-js/v13.0.1/accessibility">v13.0.1</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/accessibility">Accessibility</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/next-js/v13.0.1/advanced-features/amp-support/adding-amp-components">advanced-features</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/next-js/v13.0.1/api-reference/cli">api-reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/api-reference/cli">Next.js CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/api-reference/create-next-app">Create Next App</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/next-js/v13.0.1/api-reference/data-fetching/get-initial-props">data-fetching</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/api-reference/edge-runtime">Edge Runtime</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/next-js/v13.0.1/api-reference/next/amp">next</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/api-reference/next/amp">next/amp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/api-reference/next/font">@next/font</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/api-reference/next/head">next/head</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/api-reference/next/image">next/image</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/next-js/v13.0.1/api-reference/next/legacy/image">legacy</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/api-reference/next/link">next/link</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/api-reference/next/router">next/router</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/api-reference/next/script">next/script</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/next-js/v13.0.1/api-reference/next/server">next/server</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/next-js/v13.0.1/api-reference/next.config.js/basepath">next.config.js</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/next-js/v13.0.1/api-routes/dynamic-api-routes">api-routes</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/next-js/v13.0.1/basic-features/built-in-css-support">basic-features</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/deployment">Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/faq">Frequently Asked Questions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/getting-started">getting-started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/going-to-production">Going to Production</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/next-js/v13.0.1/guides/building-forms">guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/next-js/v13.0.1/migrating/from-create-react-app">migrating</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/next-js/v13.0.1/routing/">Routing</a><button aria-label="Expand sidebar category &#x27;Routing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/testing">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/next-js/v13.0.1/upgrading">upgrading</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">next-js</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">v13.0.1</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">api-reference</span><meta itemprop="position" content="3"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">next</span><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">next/server</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>next/server</h1>
<p><code>next/server</code> provides server-only helpers for use in <a href="/docs/middleware.md">Middleware</a> and <a href="/docs/api-routes/edge-api-routes.md">Edge API Routes</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nextrequest">NextRequest<a href="#nextrequest" class="hash-link" aria-label="Direct link to NextRequest" title="Direct link to NextRequest">​</a></h2>
<p>The <code>NextRequest</code> object is an extension of the native <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noopener noreferrer"><code>Request</code></a> interface, with the following added methods and properties:</p>
<ul>
<li>
<p><code>cookies</code> - A <a href="https://edge-runtime.vercel.app/packages/cookies#for-request" target="_blank" rel="noopener noreferrer">RequestCookies</a> instance with cookies from the <code>Request</code>. It reads/mutates the <code>Cookie</code> header of the request. See also <a href="/docs/advanced-features/middleware#using-cookies">Using cookies in Middleware</a>.</p>
<ul>
<li><code>get</code> - A method that takes a cookie <code>name</code> and returns an object with <code>name</code> and <code>value</code>. If a cookie with <code>name</code> isn&#x27;t found, it returns <code>undefined</code>. If multiple cookies match, it will only return the first match.</li>
<li><code>getAll</code> - A method that is similar to <code>get</code>, but returns a list of all the cookies with a matching <code>name</code>. If <code>name</code> is unspecified, it returns all the available cookies.</li>
<li><code>set</code> - A method that takes an object with properties of <code>CookieListItem</code> as defined in the <a href="https://wicg.github.io/cookie-store/#dictdef-cookielistitem" target="_blank" rel="noopener noreferrer">W3C CookieStore API</a> spec.</li>
<li><code>delete</code> - A method that takes either a cookie <code>name</code> or a list of names. and removes the cookies matching the name(s). Returns <code>true</code> for deleted and <code>false</code> for undeleted cookies.</li>
<li><code>has</code> - A method that takes a cookie <code>name</code> and returns a <code>boolean</code> based on if the cookie exists (<code>true</code>) or not (<code>false</code>).</li>
<li><code>clear</code> - A method that takes no argument and will effectively remove the <code>Cookie</code> header.</li>
</ul>
</li>
<li>
<p><code>nextUrl</code>: Includes an extended, parsed, URL object that gives you access to Next.js specific properties such as <code>pathname</code>, <code>basePath</code>, <code>trailingSlash</code> and <code>i18n</code>. Includes the following properties:</p>
<ul>
<li><code>basePath</code> (<code>string</code>)</li>
<li><code>buildId</code> (<code>string || undefined</code>)</li>
<li><code>defaultLocale</code> (<code>string || undefined</code>)</li>
<li><code>domainLocale</code>
<ul>
<li><code>defaultLocale</code>: (<code>string</code>)</li>
<li><code>domain</code>: (<code>string</code>)</li>
<li><code>http</code>: (<code>boolean || undefined</code>)</li>
<li><code>locales</code>: (<code>string[] || undefined</code>)</li>
</ul>
</li>
<li><code>locale</code> (<code>string || undefined</code>)</li>
<li><code>url</code> (<code>URL</code>)</li>
</ul>
</li>
<li>
<p><code>ip</code>: (<code>string || undefined</code>) - Has the IP address of the <code>Request</code>. This information is provided by your hosting platform.</p>
</li>
<li>
<p><code>geo</code> - Has the geographic location from the <code>Request</code>. This information is provided by your hosting platform. Includes the following properties:</p>
<ul>
<li><code>city</code> (<code>string || undefined</code>)</li>
<li><code>country</code> (<code>string || undefined</code>)</li>
<li><code>region</code> (<code>string || undefined</code>)</li>
<li><code>latitude</code> (<code>string || undefined</code>)</li>
<li><code>longitude</code> (<code>string || undefined</code>)</li>
</ul>
</li>
</ul>
<p>You can use the <code>NextRequest</code> object as a direct replacement for the native <code>Request</code> interface, giving you more control over how you manipulate the request.</p>
<p><code>NextRequest</code> can be imported from <code>next/server</code>:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> NextRequest </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;next/server&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nextfetchevent">NextFetchEvent<a href="#nextfetchevent" class="hash-link" aria-label="Direct link to NextFetchEvent" title="Direct link to NextFetchEvent">​</a></h2>
<p>The <code>NextFetchEvent</code> object extends the native <a href="https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent" target="_blank" rel="noopener noreferrer"><code>FetchEvent</code></a> object, and includes the <a href="https://developer.mozilla.org/en-US/docs/Web/API/ExtendableEvent/waitUntil" target="_blank" rel="noopener noreferrer"><code>waitUntil()</code></a> method.</p>
<p>The <code>waitUntil()</code> method can be used to prolong the execution of the function if you have other background work to make.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> NextResponse </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;next/server&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> NextFetchEvent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> NextRequest </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;next/server&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">middleware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> NextRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> NextFetchEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">waitUntil</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;https://my-analytics-platform.com&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> pathname</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nextUrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pathname </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> NextResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>NextFetchEvent</code> object can be imported from <code>next/server</code>:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> NextFetchEvent </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;next/server&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nextresponse">NextResponse<a href="#nextresponse" class="hash-link" aria-label="Direct link to NextResponse" title="Direct link to NextResponse">​</a></h2>
<p>The <code>NextResponse</code> class extends the native <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank" rel="noopener noreferrer"><code>Response</code></a> interface, with the following:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="public-methods">Public Methods<a href="#public-methods" class="hash-link" aria-label="Direct link to Public Methods" title="Direct link to Public Methods">​</a></h3>
<p>Public methods are available on an instance of the <code>NextResponse</code> class. Depending on your use case, you can create an instance and assign to a variable, then access the following public methods:</p>
<ul>
<li><code>cookies</code> - A <a href="https://edge-runtime.vercel.app/packages/cookies#for-response" target="_blank" rel="noopener noreferrer">ResponseCookies</a> instance with the cookies from the <code>Response</code>. It a
A <a href="https://edge-runtime.vercel.app/packages/cookies#for-response" target="_blank" rel="noopener noreferrer">ResponseCooies</a> instance with cookies from the <code>Response</code>. It reads/mutates the <code>Set-Cookie</code> header of the response. See also <a href="/docs/advanced-features/middleware#using-cookies">Using cookies in Middleware</a>.<!-- -->
<ul>
<li><code>get</code> - A method that takes a cookie <code>name</code> and returns an object with <code>name</code> and <code>value</code>. If a cookie with <code>name</code> isn&#x27;t found, it returns <code>undefined</code>. If multiple cookies match, it will only return the first match.</li>
<li><code>getAll</code> - A method that is similar to <code>get</code>, but returns a list of all the cookies with a matching <code>name</code>. If <code>name</code> is unspecified, it returns all the available cookies.</li>
<li><code>set</code> - A method that takes an object with properties of <code>CookieListItem</code> as defined in the <a href="https://wicg.github.io/cookie-store/#dictdef-cookielistitem" target="_blank" rel="noopener noreferrer">W3C CookieStore API</a> spec.</li>
<li><code>delete</code> - A method that takes either a cookie <code>name</code> or a list of names. and removes the cookies matching the name(s). Returns <code>true</code> for deleted and <code>false</code> for undeleted cookies.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="static-methods">Static Methods<a href="#static-methods" class="hash-link" aria-label="Direct link to Static Methods" title="Direct link to Static Methods">​</a></h3>
<p>The following static methods are available on the <code>NextResponse</code> class directly:</p>
<ul>
<li><code>redirect()</code> - Returns a <code>NextResponse</code> with a redirect set</li>
<li><code>rewrite()</code> - Returns a <code>NextResponse</code> with a rewrite set</li>
<li><code>next()</code> - Returns a <code>NextResponse</code> that will continue the middleware chain</li>
</ul>
<p>To use the methods above, <strong>you must return the <code>NextResponse</code> object</strong> returned. <code>NextResponse</code> can be imported from <code>next/server</code>:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> NextResponse </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;next/server&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="useragent">userAgent<a href="#useragent" class="hash-link" aria-label="Direct link to userAgent" title="Direct link to userAgent">​</a></h2>
<p>The <code>userAgent</code> helper allows you to interact with the user agent object from the request. It is abstracted from the native <code>Request</code> object, and is an opt in feature. It has the following properties:</p>
<ul>
<li><code>isBot</code>: (<code>boolean</code>) Whether the request comes from a known bot</li>
<li><code>browser</code>
<ul>
<li><code>name</code>: (<code>string || undefined</code>) The name of the browser</li>
<li><code>version</code>: (<code>string || undefined</code>) The version of the browser, determined dynamically</li>
</ul>
</li>
<li><code>device</code>
<ul>
<li><code>model</code>: (<code>string || undefined</code>) The model of the device, determined dynamically</li>
<li><code>type</code>: (<code>string || undefined</code>) The type of the browser, can be one of the following values: <code>console</code>, <code>mobile</code>, <code>tablet</code>, <code>smarttv</code>, <code>wearable</code>, <code>embedded</code>, or <code>undefined</code></li>
<li><code>vendor</code>: (<code>string || undefined</code>) The vendor of the device, determined dynamically</li>
</ul>
</li>
<li><code>engine</code>
<ul>
<li><code>name</code>: (<code>string || undefined</code>) The name of the browser engine, could be one of the following values: <code>Amaya</code>, <code>Blink</code>, <code>EdgeHTML</code>, <code>Flow</code>, <code>Gecko</code>, <code>Goanna</code>, <code>iCab</code>, <code>KHTML</code>, <code>Links</code>, <code>Lynx</code>, <code>NetFront</code>, <code>NetSurf</code>, <code>Presto</code>, <code>Tasman</code>, <code>Trident</code>, <code>w3m</code>, <code>WebKit</code> or <code>undefined</code></li>
<li><code>version</code>: (<code>string || undefined</code>) The version of the browser engine, determined dynamically, or <code>undefined</code></li>
</ul>
</li>
<li><code>os</code>
<ul>
<li><code>name</code>: (<code>string || undefined</code>) The name of the OS, could be <code>undefined</code></li>
<li><code>version</code>: (<code>string || undefined</code>) The version of the OS, determined dynamically, or <code>undefined</code></li>
</ul>
</li>
<li><code>cpu</code>
<ul>
<li><code>architecture</code>: (<code>string || undefined</code>) The architecture of the CPU, could be one of the following values: <code>68k</code>, <code>amd64</code>, <code>arm</code>, <code>arm64</code>, <code>armhf</code>, <code>avr</code>, <code>ia32</code>, <code>ia64</code>, <code>irix</code>, <code>irix64</code>, <code>mips</code>, <code>mips64</code>, <code>pa-risc</code>, <code>ppc</code>, <code>sparc</code>, <code>sparc64</code> or <code>undefined</code></li>
</ul>
</li>
</ul>
<p><code>userAgent</code> can be imported from <code>next/server</code>:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> userAgent </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;next/server&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> NextRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> NextResponse</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> userAgent </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;next/server&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">middleware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> NextRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nextUrl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> device </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">userAgent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> viewport </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> device</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">type </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;mobile&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;mobile&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;desktop&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  url</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">searchParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;viewport&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> viewport</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> NextResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">rewrite</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-does-redirect-use-307-and-308">Why does <code>redirect</code> use 307 and 308?<a href="#why-does-redirect-use-307-and-308" class="hash-link" aria-label="Direct link to why-does-redirect-use-307-and-308" title="Direct link to why-does-redirect-use-307-and-308">​</a></h3>
<p>When using <code>redirect()</code> you may notice that the status codes used are <code>307</code> for a temporary redirect, and <code>308</code> for a permanent redirect. While traditionally a <code>302</code> was used for a temporary redirect, and a <code>301</code> for a permanent redirect, many browsers changed the request method of the redirect, from a <code>POST</code> to <code>GET</code> request when using a <code>302</code>, regardless of the origins request method.</p>
<p>Taking the following example of a redirect from <code>/users</code> to <code>/people</code>, if you make a <code>POST</code> request to <code>/users</code> to create a new user, and are conforming to a <code>302</code> temporary redirect, the request method will be changed from a <code>POST</code> to a <code>GET</code> request. This doesn&#x27;t make sense, as to create a new user, you should be making a <code>POST</code> request to <code>/people</code>, and not a <code>GET</code> request.</p>
<p>The introduction of the <code>307</code> status code means that the request method is preserved as <code>POST</code>.</p>
<ul>
<li><code>302</code> - Temporary redirect, will change the request method from <code>POST</code> to <code>GET</code></li>
<li><code>307</code> - Temporary redirect, will preserve the request method as <code>POST</code></li>
</ul>
<p>The <code>redirect()</code> method uses a <code>307</code> by default, instead of a <code>302</code> temporary redirect, meaning your requests will <em>always</em> be preserved as <code>POST</code> requests.</p>
<p>If you want to cause a <code>GET</code> response to a <code>POST</code> request, use <code>303</code>.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections" target="_blank" rel="noopener noreferrer">Learn more</a> about HTTP Redirects.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-do-i-access-environment-variables">How do I access Environment Variables?<a href="#how-do-i-access-environment-variables" class="hash-link" aria-label="Direct link to How do I access Environment Variables?" title="Direct link to How do I access Environment Variables?">​</a></h3>
<p><code>process.env</code> can be used to access <a href="/docs/basic-features/environment-variables.md">Environment Variables</a> from Edge Middleware. They are evaluated during <code>next build</code>:</p>
<table><thead><tr><th>Works</th><th>Does <strong>not</strong> work</th></tr></thead><tbody><tr><td><code>console.log(process.env.MY_ENV_VARIABLE)</code></td><td><code>const getEnv = name =&gt; process.env[name]</code></td></tr><tr><td><code>const { MY_ENV_VARIABLE } = process.env</code></td><td></td></tr><tr><td><code>const { &quot;MY-ENV-VARIABLE&quot;: MY_ENV_VARIABLE } = process.env</code></td><td></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="related">Related<a href="#related" class="hash-link" aria-label="Direct link to Related" title="Direct link to Related">​</a></h2>
<div class="card"><a href="/docs/api-reference/edge-runtime.md"><b>Edge Runtime</b><small>Learn more about the supported Web APIs available.</small></a></div>
<div class="card"><a href="/docs/middleware.md"><b>Middleware</b><small>Run code before a request is completed.</small></a></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/next-js/v13.0.1/api-reference/next/server.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/next-js/v13.0.1/api-reference/next/script"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">next/script</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/next-js/v13.0.1/api-reference/next.config.js/basepath"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Base Path</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#nextrequest" class="table-of-contents__link toc-highlight">NextRequest</a></li><li><a href="#nextfetchevent" class="table-of-contents__link toc-highlight">NextFetchEvent</a></li><li><a href="#nextresponse" class="table-of-contents__link toc-highlight">NextResponse</a><ul><li><a href="#public-methods" class="table-of-contents__link toc-highlight">Public Methods</a></li><li><a href="#static-methods" class="table-of-contents__link toc-highlight">Static Methods</a></li></ul></li><li><a href="#useragent" class="table-of-contents__link toc-highlight">userAgent</a></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#why-does-redirect-use-307-and-308" class="table-of-contents__link toc-highlight">Why does <code>redirect</code> use 307 and 308?</a></li><li><a href="#how-do-i-access-environment-variables" class="table-of-contents__link toc-highlight">How do I access Environment Variables?</a></li></ul></li><li><a href="#related" class="table-of-contents__link toc-highlight">Related</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>